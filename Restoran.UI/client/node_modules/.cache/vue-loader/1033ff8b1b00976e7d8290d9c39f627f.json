{"remainingRequest":"C:\\Users\\pc\\Desktop\\Vue\\Restoran.UI\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\pc\\Desktop\\Vue\\Restoran.UI\\client\\src\\components\\Setting.vue?vue&type=style&index=0&id=091d0f06&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\pc\\Desktop\\Vue\\Restoran.UI\\client\\src\\components\\Setting.vue","mtime":1589824453150},{"path":"C:\\Users\\pc\\Desktop\\Vue\\Restoran.UI\\client\\node_modules\\css-loader\\dist\\cjs.js","mtime":1581760770709},{"path":"C:\\Users\\pc\\Desktop\\Vue\\Restoran.UI\\client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1581760786798},{"path":"C:\\Users\\pc\\Desktop\\Vue\\Restoran.UI\\client\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\pc\\Desktop\\Vue\\Restoran.UI\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1581760768702},{"path":"C:\\Users\\pc\\Desktop\\Vue\\Restoran.UI\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1581760786797}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jay1lZGl0b3JfX2VkaXRhYmxlICB7CgktbXMtZmxleDogMCAwIDEwMCU7CglmbGV4OiAwIDAgMTAwJTsKCW1heC13aWR0aDogMTAwJTsKCW91dGxpbmU6IG5vbmU7Cglib3JkZXI6IDFweCBzb2xpZCAjYzRjNGM0Owp9CgoubWF4LWgtNDAwCnsKCW1heC1oZWlnaHQ6IDQwMHB4Owp9Cg=="},{"version":3,"sources":["Setting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyTA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Setting.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div id=\"Setting\">\r\n\t\t<Header/>\r\n\t\t<div class=\"container\">\r\n            <div class=\"row mt-4\">\r\n                <div class=\"col-12 px-4 p-lg-0\">\r\n                    <div class=\"row mb-3\" v-for=\"(content,index) in contents\">\r\n                        <span class=\"col-12 dropdown\" contenteditable v-bind:id=\"[`siteVisibleName${content.contentId}`]\" @click=\"e => e.target.classList.toggle('active')\">{{content.siteVisibleName}}</span>\r\n                        <transition name=\"fade\">\r\n                            <div class=\"col-12 dropcontent d-none\">\r\n                                <div class=\"row mt-3\">\r\n                                    <editor\r\n                                       api-key=\"6o9ewvq6bt1zsdfx45k1wym6rdyfmhe5xb2dczqj7sapvqtt\"\r\n                                       cloud-channel=\"5\"\r\n                                       :init=\"{\r\n                                            selector: 'textarea',\r\n                                            height: 500,\r\n                                            menubar: true,\r\n                                            language:'tr',\r\n                                            entity_encoding : 'raw',\r\n                                            plugins: [\r\n                                            'advlist autolink lists link image charmap print preview hr anchor pagebreak',\r\n                                            'searchreplace wordcount visualblocks visualchars code fullscreen',\r\n                                            'insertdatetime media nonbreaking save table contextmenu directionality',\r\n                                            'emoticons template paste textcolor colorpicker textpattern imagetools codesample toc'\r\n                                            ],\r\n                                            toolbar1: 'undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image',\r\n                                            toolbar2: 'print preview media | forecolor backcolor emoticons | codesample',\r\n                                            images_upload_handler: function (blobInfo, success, failure) {\r\n                                                imageUpload(blobInfo);\r\n                                            },\r\n                                            external_filemanager_path: '/filemanager/',\r\n                                            filemanager_title: 'Media Gallery',\r\n                                            external_plugins: { 'filemanager':'/filemanager/plugin.min.js' }\r\n                                        }\"\r\n\r\n                                       v-model=\"content.contentDescription\"\r\n                                    />\r\n                                </div>\r\n                                <div class=\"row mt-3\">\r\n                                    <div class=\"col-12 p-0\">\r\n                                        <button class=\"btn btn-success btn-small px-3 py-1 float-right\" type=\"button\" name=\"save\" @click=\"fn_saveContent(content.contentId)\">\r\n                                            Kaydet\r\n                                        </button>\r\n                                        <button class=\"btn btn-info btn-small px-3 py-1 mr-3 float-right\" type=\"button\" name=\"save\" @click=\"fn_previewContent(content.contentId)\">\r\n                                            Önizleme\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </transition>\r\n                    </div>\r\n                    <div class=\"row mb-3\">\r\n                        <span class=\"col-12 dropdown\" @click=\"e => e.target.classList.toggle('active')\">E-mail Gönder</span>\r\n                        <transition name=\"fade\">\r\n                            <div class=\"col-12 dropcontent d-none\">\r\n                                <div class=\"row mt-3\">\r\n                                    <div class=\"col-lg-6 col-12 pb-2\">\r\n                                        <span class=\"col-12 pl-0\">Gönderilecek Adres</span>\r\n                                        <input type=\"email\" name=\"toMail\" placeholder=\"örn: ornek@ornek.com.tr\" class=\"form-control col-lg-10 col-12\" v-model=\"toMail\">                    \r\n                                    </div>\r\n                                    <div class=\"col-lg-6 col-12 pb-2\">\r\n                                        <span class=\"col-12 pl-0\">Konu</span>\r\n                                        <input type=\"text\" name=\"toSubject\" class=\"form-control col-lg-10 col-12\" v-model=\"subject\">                    \r\n                                    </div>\r\n                                    <div class=\"col-12 pb-2 pt-3 pt-lg-0\">\r\n                                        <editor\r\n                                           api-key=\"6o9ewvq6bt1zsdfx45k1wym6rdyfmhe5xb2dczqj7sapvqtt\"\r\n                                           cloud-channel=\"5\"\r\n                                           :init=\"{\r\n                                                selector: 'textarea',\r\n                                                height: 500,\r\n                                                menubar: true,\r\n                                                plugins: [\r\n                                                'advlist autolink lists link image charmap print preview hr anchor pagebreak',\r\n                                                'searchreplace wordcount visualblocks visualchars code fullscreen',\r\n                                                'insertdatetime media nonbreaking save table contextmenu directionality',\r\n                                                'emoticons template paste textcolor colorpicker textpattern imagetools codesample toc'\r\n                                                ],\r\n                                                toolbar1: 'undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image',\r\n                                                toolbar2: 'print preview media | forecolor backcolor emoticons | codesample',\r\n                                                images_upload_handler: function (blobInfo, success, failure) {\r\n                                                    imageUpload(blobInfo);\r\n                                                },\r\n                                                external_filemanager_path: '/filemanager/',\r\n                                                filemanager_title: 'Media Gallery',\r\n                                                external_plugins: { 'filemanager':'/filemanager/plugin.min.js' }\r\n                                            }\"\r\n\r\n                                           v-model=\"mailHtml\"\r\n                                        />\r\n                                    </div>\r\n                                    <div class=\"col-12\">\r\n                                        <button class=\"btn btn-success btn-sm\" @click=\"sendMail\">Gönder</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </transition>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <transition name=\"fade\">\r\n                <div class=\"popup bg-white\" v-show=\"isPreviewHelp\">\r\n                    <div class=\"popupContent col-12\">\r\n                        <div class=\"container\">\r\n                            <div class=\"row py-5\">\r\n                                <div class=\"col-12 border rounded max-h-400 overflow-auto\">\r\n                                    <div class=\"row m-lg-5 m-1\">\r\n                                        <div class=\"col-12 help py-5\" v-html=\"previewContent\">\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"close\" @click=\"isPreviewHelp = false\">\r\n                        &times;\r\n                    </div>\t\t\t\r\n                </div>\r\n            </transition>\r\n        </div>\r\n        <Footer/>\r\n    </div>\r\n</template>\r\n<script>\r\n\timport Header from '@/components/Header'\r\n\timport Footer from '@/components/Footer'\r\n\timport axios from 'axios'\r\n\timport Swal from 'sweetalert2'\r\n\r\n    import Editor from '@tinymce/tinymce-vue'\r\n\r\n\texport default{\r\n\t\tname:'Setting',\r\n\t\tcomponents:{\r\n\t\t\tHeader , Footer , 'editor': Editor\r\n\t\t},\r\n        props: {\r\n            defaultValue: String,\r\n            disabled: Boolean\r\n        },\r\n\t\tdata(){\r\n\t\t\treturn{\r\n                contents:[],\r\n                previewContent:'',\r\n                isPreviewHelp:false,\r\n                toMail:'',\r\n                subject:'',\r\n                mailHtml:''\r\n            }\r\n        },\r\n        methods:{\r\n            sendMail(){\r\n                Swal.fire({\r\n                    title: 'Emin misin?',\r\n                    text: \"Göndermek istiyor musunuz?\",\r\n                    icon: 'question',\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: '#3085d6',\r\n                    cancelButtonColor: '#d33',\r\n                    confirmButtonText: 'Evet',\r\n                    cancelButtonText: 'Hayır'\r\n                }).then((result) => {\r\n                    if (result.value == true) {\r\n\r\n                        axios.post(this.$store.state.apiUrl + '/api/v1/mail/send',{'subject':this.subject ,'html':this.mailHtml, 'text':'Deneme Text' , 'toMail':this.toMail} ,{'headers': { 'Authorization':'Bearer ' + localStorage.getItem('token')}})\r\n                        .then(response => {\r\n                            if(!response.success)\r\n                            {\r\n                                Swal.fire(\r\n                                    '',\r\n                                    'Başarılı.',\r\n                                    'success'\r\n                                    );\r\n                                this.getStart();\r\n                            }\r\n                            else\r\n                            {\r\n                                Swal.fire(\r\n                                    '',\r\n                                    'Başarısız.',\r\n                                    'error'\r\n                                    );\r\n                            }\r\n                        }).catch(err => {\r\n                            console.log(err);\r\n                        });\r\n                    }\r\n                })\r\n            },\r\n            imageUpload(file){\r\n                let formData = new FormData();\r\n                formData.append('file', file);\r\n      \r\n                this.axios.post(this.$store.state.apiUrl + '/api/v1/image/upload',\r\n                    formData,\r\n                    {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data'\r\n                    }\r\n                  }\r\n                ).then(response => {\r\n                      return true;\r\n                })\r\n                .catch(function(){\r\n                  return false;\r\n                });\r\n\r\n                return true;\r\n            },\r\n        \tnowDate:function(){\r\n        \t\tvar date = new Date();\r\n        \t\tvar year = date.getFullYear();\r\n        \t\tvar year = date.getFullYear();\r\n        \t\tvar mounth = String(date.getMonth() + 1);\r\n        \t\tvar day = String(date.getDate());\r\n        \t\tif (day.length == 1) {\r\n        \t\t\tday = \"0\" + day;\r\n        \t\t}\r\n        \t\tif (mounth.length == 1) {\r\n        \t\t\tmounth = \"0\" + mounth;\r\n        \t\t}\r\n\r\n        \t\tvar time = date.toLocaleTimeString();\r\n\r\n        \t\tvar nowDate = year + '-' + mounth + '-' + day + ' ' + time;\r\n        \t\treturn nowDate ;\r\n        \t},\r\n            fn_previewContent(contentId)\r\n            {\r\n                this.isPreviewHelp = true;\r\n                var result = '';\r\n                this.contents.map(function(val,key){\r\n                    if(val.contentId == contentId)\r\n                    {\r\n                        result = val.contentDescription;\r\n                    }\r\n                })\r\n                this.previewContent = result;\r\n            },\r\n        \tfn_saveContent(id){\r\n                var contentname = '';\r\n                var siteVisibleName = document.getElementById('siteVisibleName'+id).innerText;\r\n                var contentdescription = '';\r\n                var createdat = '';\r\n                var updateat = '';\r\n\r\n                this.contents.map(function(val,key){\r\n                    if(val.contentId == id)\r\n                    {\r\n                        contentname = val.contentName;\r\n                        contentdescription = val.contentDescription.replace(\"'\",\"`\");\r\n                        createdat = val.createdAt.replace('T',' ').split('.')[0];\r\n                    }\r\n                });\r\n                console.log(siteVisibleName);\r\n        \t\tvar updateDate = this.nowDate();\r\n        \t\tupdateat = updateDate;\r\n        \t\tSwal.fire({\r\n        \t\t\ttitle: 'Emin misin?',\r\n        \t\t\ttext: \"Güncellemek istiyor musunuz?\",\r\n        \t\t\ticon: 'question',\r\n        \t\t\tshowCancelButton: true,\r\n        \t\t\tconfirmButtonColor: '#3085d6',\r\n        \t\t\tcancelButtonColor: '#d33',\r\n        \t\t\tconfirmButtonText: 'Evet',\r\n        \t\t\tcancelButtonText: 'Hayır'\r\n        \t\t}).then((result) => {\r\n        \t\t\tif (result.value == true) {\r\n\r\n        \t\t\t\taxios.post(this.$store.state.apiUrl + '/api/v1/content/'+id,{'contentName':contentname ,'siteVisibleName':siteVisibleName, 'contentDescription':contentdescription , 'createdAt':createdat , 'updateAt':updateat} ,{'headers': { 'Authorization':'Bearer ' + localStorage.getItem('token')}})\r\n        \t\t\t\t.then(response => {\r\n        \t\t\t\t\tif(!response.data.error)\r\n        \t\t\t\t\t{\r\n        \t\t\t\t\t\tSwal.fire(\r\n        \t\t\t\t\t\t\t'',\r\n        \t\t\t\t\t\t\t'Başarılı.',\r\n        \t\t\t\t\t\t\t'success'\r\n        \t\t\t\t\t\t\t);\r\n        \t\t\t\t\t\tthis.getStart();\r\n        \t\t\t\t\t}\r\n        \t\t\t\t\telse\r\n        \t\t\t\t\t{\r\n        \t\t\t\t\t\tresponse.data.error.sqlMessage ? console.log(response.data.error.sqlMessage) : false;\r\n        \t\t\t\t\t\tSwal.fire(\r\n        \t\t\t\t\t\t\t'',\r\n        \t\t\t\t\t\t\t'Başarısız.',\r\n        \t\t\t\t\t\t\t'error'\r\n        \t\t\t\t\t\t\t);\r\n        \t\t\t\t\t}\r\n        \t\t\t\t}).catch(err => {\r\n        \t\t\t\t\tconsole.log(err);\r\n        \t\t\t\t});\r\n        \t\t\t}\r\n        \t\t})\r\n        \t},\r\n        \tgetStart(){\r\n        \t\taxios.get(this.$store.state.apiUrl + '/api/v1/content' ,{'headers': { 'Authorization':'Bearer ' + localStorage.getItem('token')}})\r\n        \t\t.then(response => {\r\n        \t\t\tthis.contents = response.data.response;\r\n        \t\t}).catch(err => {\r\n        \t\t\tconsole.log(err);\r\n        \t\t});\r\n        \t}\r\n        },\r\n        created(){\r\n        \tthis.getStart();\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n\t.ck-editor__editable  {\r\n\t\t-ms-flex: 0 0 100%;\r\n\t\tflex: 0 0 100%;\r\n\t\tmax-width: 100%;\r\n\t\toutline: none;\r\n\t\tborder: 1px solid #c4c4c4;\r\n\t}\r\n\r\n\t.max-h-400\r\n\t{\r\n\t\tmax-height: 400px;\r\n\t}\r\n</style>"]}]}