{"remainingRequest":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-ui\\src\\toolbar\\toolbarview.js","dependencies":[{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-ui\\src\\toolbar\\toolbarview.js","mtime":499162500000},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-dev-webpack-plugin\\lib\\translatesourceloader.js","mtime":499162500000},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1581760768702},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1581760768279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnBhcnNlLWludCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxSZXN0b3JhblxcUmVzdG9yYW5cXFJlc3RvcmFuLlVJXFxjbGllbnRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxSZXN0b3JhblxcUmVzdG9yYW5cXFJlc3RvcmFuLlVJXFxjbGllbnRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXFJlc3RvcmFuXFxSZXN0b3JhblxcUmVzdG9yYW4uVUlcXGNsaWVudFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXFJlc3RvcmFuXFxSZXN0b3JhblxcUmVzdG9yYW4uVUlcXGNsaWVudFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxSZXN0b3JhblxcUmVzdG9yYW5cXFJlc3RvcmFuLlVJXFxjbGllbnRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9nZXQgZnJvbSAiQzpcXFVzZXJzXFxwY1xcRGVza3RvcFxcUmVzdG9yYW5cXFJlc3RvcmFuXFxSZXN0b3Jhbi5VSVxcY2xpZW50XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9nZXQiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXFJlc3RvcmFuXFxSZXN0b3JhblxcUmVzdG9yYW4uVUlcXGNsaWVudFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwoKLyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDIwLCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIHVpL3Rvb2xiYXIvdG9vbGJhcnZpZXcKICovCgovKiBnbG9iYWxzIGNvbnNvbGUgKi8KaW1wb3J0IFZpZXcgZnJvbSAnLi4vdmlldyc7CmltcG9ydCBGb2N1c1RyYWNrZXIgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvZm9jdXN0cmFja2VyJzsKaW1wb3J0IEZvY3VzQ3ljbGVyIGZyb20gJy4uL2ZvY3VzY3ljbGVyJzsKaW1wb3J0IEtleXN0cm9rZUhhbmRsZXIgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMva2V5c3Ryb2tlaGFuZGxlcic7CmltcG9ydCBUb29sYmFyU2VwYXJhdG9yVmlldyBmcm9tICcuL3Rvb2xiYXJzZXBhcmF0b3J2aWV3JzsKaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL2RvbS9yZXNpemVvYnNlcnZlcic7CmltcG9ydCBwcmV2ZW50RGVmYXVsdCBmcm9tICcuLi9iaW5kaW5ncy9wcmV2ZW50ZGVmYXVsdC5qcyc7CmltcG9ydCBSZWN0IGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL2RvbS9yZWN0JzsKaW1wb3J0IGdsb2JhbCBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9kb20vZ2xvYmFsJzsKaW1wb3J0IHsgY3JlYXRlRHJvcGRvd24sIGFkZFRvb2xiYXJUb0Ryb3Bkb3duIH0gZnJvbSAnLi4vZHJvcGRvd24vdXRpbHMnOwppbXBvcnQgeyBhdHRhY2hMaW5rVG9Eb2N1bWVudGF0aW9uIH0gZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvY2tlZGl0b3JlcnJvcic7CmltcG9ydCB2ZXJ0aWNhbERvdHNJY29uIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtY29yZS90aGVtZS9pY29ucy90aHJlZS12ZXJ0aWNhbC1kb3RzLnN2Zyc7CmltcG9ydCAnLi4vLi4vdGhlbWUvY29tcG9uZW50cy90b29sYmFyL3Rvb2xiYXIuY3NzJzsKLyoqCiAqIFRoZSB0b29sYmFyIHZpZXcgY2xhc3MuCiAqCiAqIEBleHRlbmRzIG1vZHVsZTp1aS92aWV3flZpZXcKICogQGltcGxlbWVudHMgbW9kdWxlOnVpL2Ryb3Bkb3duL2Ryb3Bkb3ducGFuZWxmb2N1c2FibGV+RHJvcGRvd25QYW5lbEZvY3VzYWJsZQogKi8KCnZhciBUb29sYmFyVmlldyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9WaWV3KSB7CiAgX2luaGVyaXRzKFRvb2xiYXJWaWV3LCBfVmlldyk7CgogIC8qKgogICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlld30gY2xhc3MuCiAgICoKICAgKiBBbHNvIHNlZSB7QGxpbmsgI3JlbmRlcn0uCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTp1dGlscy9sb2NhbGV+TG9jYWxlfSBsb2NhbGUgVGhlIGxvY2FsaXphdGlvbiBzZXJ2aWNlcyBpbnN0YW5jZS4KICAgKiBAcGFyYW0ge21vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJPcHRpb25zfSBbb3B0aW9uc10gQ29uZmlndXJhdGlvbiBvcHRpb25zIG9mIHRoZSB0b29sYmFyLgogICAqLwogIGZ1bmN0aW9uIFRvb2xiYXJWaWV3KGxvY2FsZSwgb3B0aW9ucykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUb29sYmFyVmlldyk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVG9vbGJhclZpZXcpLmNhbGwodGhpcywgbG9jYWxlKSk7CiAgICB2YXIgYmluZCA9IF90aGlzLmJpbmRUZW1wbGF0ZTsKICAgIHZhciB0ID0gX3RoaXMudDsKICAgIC8qKgogICAgICogQSByZWZlcmVuY2UgdG8gdGhlIG9wdGlvbnMgb2JqZWN0IHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyT3B0aW9uc30KICAgICAqLwoKICAgIF90aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgLyoqCiAgICAgKiBMYWJlbCB1c2VkIGJ5IGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMgdG8gZGVzY3JpYmUgdGhpcyB0b29sYmFyIGVsZW1lbnQuCiAgICAgKgogICAgICogQGRlZmF1bHQgJ0VkaXRvciB0b29sYmFyJwogICAgICogQG1lbWJlciB7U3RyaW5nfSAjYXJpYUxhYmVsCiAgICAgKi8KCiAgICBfdGhpcy5zZXQoJ2FyaWFMYWJlbCcsIHQoJ0VkaXRvciB0b29sYmFyJykpOwogICAgLyoqCiAgICAgKiBUaGUgbWF4aW11bSB3aWR0aCBvZiB0aGUgdG9vbGJhciBlbGVtZW50LgogICAgICoKICAgICAqICoqTm90ZSoqOiBXaGVuIHNldCB0byBhIHNwZWNpZmljIHZhbHVlIChlLmcuIGAnMjAwcHgnYCksIHRoZSB2YWx1ZSB3aWxsIGFmZmVjdCB0aGUgYmVoYXZpb3Igb2YgdGhlCiAgICAgKiB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhck9wdGlvbnMjc2hvdWxkR3JvdXBXaGVuRnVsbH0KICAgICAqIG9wdGlvbiBieSBjaGFuZ2luZyB0aGUgbnVtYmVyIG9mIHtAbGluayAjaXRlbXN9IHRoYXQgd2lsbCBiZSBkaXNwbGF5ZWQgaW4gdGhlIHRvb2xiYXIgYXQgYSB0aW1lLgogICAgICoKICAgICAqIEBvYnNlcnZhYmxlCiAgICAgKiBAZGVmYXVsdCAnYXV0bycKICAgICAqIEBtZW1iZXIge1N0cmluZ30gI21heFdpZHRoCiAgICAgKi8KCgogICAgX3RoaXMuc2V0KCdtYXhXaWR0aCcsICdhdXRvJyk7CiAgICAvKioKICAgICAqIEEgY29sbGVjdGlvbiBvZiB0b29sYmFyIGl0ZW1zIChidXR0b25zLCBkcm9wZG93bnMsIGV0Yy4pLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL3ZpZXdjb2xsZWN0aW9uflZpZXdDb2xsZWN0aW9ufQogICAgICovCgoKICAgIF90aGlzLml0ZW1zID0gX3RoaXMuY3JlYXRlQ29sbGVjdGlvbigpOwogICAgLyoqCiAgICAgKiBUcmFja3MgaW5mb3JtYXRpb24gYWJvdXQgdGhlIERPTSBmb2N1cyBpbiB0aGUgdG9vbGJhci4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1dGlscy9mb2N1c3RyYWNrZXJ+Rm9jdXNUcmFja2VyfQogICAgICovCgogICAgX3RoaXMuZm9jdXNUcmFja2VyID0gbmV3IEZvY3VzVHJhY2tlcigpOwogICAgLyoqCiAgICAgKiBBbiBpbnN0YW5jZSBvZiB0aGUge0BsaW5rIG1vZHVsZTp1dGlscy9rZXlzdHJva2VoYW5kbGVyfktleXN0cm9rZUhhbmRsZXJ9CiAgICAgKiB0byBoYW5kbGUga2V5Ym9hcmQgbmF2aWdhdGlvbiBpbiB0aGUgdG9vbGJhci4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1dGlscy9rZXlzdHJva2VoYW5kbGVyfktleXN0cm9rZUhhbmRsZXJ9CiAgICAgKi8KCiAgICBfdGhpcy5rZXlzdHJva2VzID0gbmV3IEtleXN0cm9rZUhhbmRsZXIoKTsKICAgIC8qKgogICAgICogQW4gYWRkaXRpb25hbCBDU1MgY2xhc3MgYWRkZWQgdG8gdGhlIHtAbGluayAjZWxlbWVudH0uCiAgICAgKgogICAgICogQG9ic2VydmFibGUKICAgICAqIEBtZW1iZXIge1N0cmluZ30gI2NsYXNzCiAgICAgKi8KCiAgICBfdGhpcy5zZXQoJ2NsYXNzJyk7CiAgICAvKioKICAgICAqIFdoZW4gc2V0IHRydWUsIG1ha2VzIHRoZSB0b29sYmFyIGxvb2sgY29tcGFjdCB3aXRoIHtAbGluayAjZWxlbWVudH0uCiAgICAgKgogICAgICogQG9ic2VydmFibGUKICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKiBAbWVtYmVyIHtTdHJpbmd9ICNpc0NvbXBhY3QKICAgICAqLwoKCiAgICBfdGhpcy5zZXQoJ2lzQ29tcGFjdCcsIGZhbHNlKTsKICAgIC8qKgogICAgICogQSAoY2hpbGQpIHZpZXcgY29udGFpbmluZyB7QGxpbmsgI2l0ZW1zIHRvb2xiYXIgaXRlbXN9LgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+SXRlbXNWaWV3fQogICAgICovCgoKICAgIF90aGlzLml0ZW1zVmlldyA9IG5ldyBJdGVtc1ZpZXcobG9jYWxlKTsKICAgIC8qKgogICAgICogQSB0b3DigJNsZXZlbCBjb2xsZWN0aW9uIGFnZ3JlZ2F0aW5nIGJ1aWxkaW5nIGJsb2NrcyBvZiB0aGUgdG9vbGJhci4KICAgICAqCiAgICAgKgnilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgVG9vbGJhclZpZXcg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQCiAgICAgKgl8IOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAjY2hpbGRyZW4g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQIHwKICAgICAqCXwgfCAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAjaXRlbXNWaWV3IOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgIHwgfAogICAgICoJfCB8ICAgfCBbIGl0ZW0xIF0gWyBpdGVtMiBdIC4uLiBbIGl0ZW1OIF0gfCAgIHwgfAogICAgICoJfCB8ICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSALeKUmCAgIHwgfAogICAgICoJfCDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJggfAogICAgICoJ4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYCiAgICAgKgogICAgICogQnkgZGVmYXVsdCwgaXQgY29udGFpbnMgdGhlIHtAbGluayAjaXRlbXNWaWV3fSBidXQgaXQgY2FuIGJlIGV4dGVuZGVkIHdpdGggYWRkaXRpb25hbAogICAgICogVUkgZWxlbWVudHMgd2hlbiBuZWNlc3NhcnkuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dWkvdmlld2NvbGxlY3Rpb25+Vmlld0NvbGxlY3Rpb259CiAgICAgKi8KCiAgICBfdGhpcy5jaGlsZHJlbiA9IF90aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKTsKCiAgICBfdGhpcy5jaGlsZHJlbi5hZGQoX3RoaXMuaXRlbXNWaWV3KTsKICAgIC8qKgogICAgICogQSBjb2xsZWN0aW9uIG9mIHtAbGluayAjaXRlbXN9IHRoYXQgdGFrZSBwYXJ0IGluIHRoZSBmb2N1cyBjeWNsaW5nCiAgICAgKiAoaS5lLiBuYXZpZ2F0aW9uIHVzaW5nIHRoZSBrZXlib2FyZCkuIFVzdWFsbHksIGl0IGNvbnRhaW5zIGEgc3Vic2V0IG9mIHtAbGluayAjaXRlbXN9IHdpdGgKICAgICAqIHNvbWUgb3B0aW9uYWwgVUkgZWxlbWVudHMgdGhhdCBhbHNvIGJlbG9uZyB0byB0aGUgdG9vbGJhciBhbmQgc2hvdWxkIGJlIGZvY3VzYWJsZQogICAgICogYnkgdGhlIHVzZXIuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dWkvdmlld2NvbGxlY3Rpb25+Vmlld0NvbGxlY3Rpb259CiAgICAgKi8KCgogICAgX3RoaXMuZm9jdXNhYmxlcyA9IF90aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKTsKICAgIC8qKgogICAgICogQ29udHJvbHMgdGhlIG9yaWVudGF0aW9uIG9mIHRvb2xiYXIgaXRlbXMuIE9ubHkgYXZhaWxhYmxlIHdoZW4KICAgICAqIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyT3B0aW9ucyNzaG91bGRHcm91cFdoZW5GdWxsIGR5bmFtaWMgaXRlbXMgZ3JvdXBpbmd9CiAgICAgKiBpcyAqKmRpc2FibGVkKiouCiAgICAgKgogICAgICogQG9ic2VydmFibGUKICAgICAqIEBtZW1iZXIge0Jvb2xlYW59ICNpc1ZlcnRpY2FsCiAgICAgKi8KCiAgICAvKioKICAgICAqIEhlbHBzIGN5Y2xpbmcgb3ZlciB7QGxpbmsgI2ZvY3VzYWJsZXMgZm9jdXNhYmxlIGl0ZW1zfSBpbiB0aGUgdG9vbGJhci4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBwcm90ZWN0ZWQKICAgICAqIEBtZW1iZXIge21vZHVsZTp1aS9mb2N1c2N5Y2xlcn5Gb2N1c0N5Y2xlcn0KICAgICAqLwoKICAgIF90aGlzLl9mb2N1c0N5Y2xlciA9IG5ldyBGb2N1c0N5Y2xlcih7CiAgICAgIGZvY3VzYWJsZXM6IF90aGlzLmZvY3VzYWJsZXMsCiAgICAgIGZvY3VzVHJhY2tlcjogX3RoaXMuZm9jdXNUcmFja2VyLAogICAgICBrZXlzdHJva2VIYW5kbGVyOiBfdGhpcy5rZXlzdHJva2VzLAogICAgICBhY3Rpb25zOiB7CiAgICAgICAgLy8gTmF2aWdhdGUgdG9vbGJhciBpdGVtcyBiYWNrd2FyZHMgdXNpbmcgdGhlIGFycm93W2xlZnQsdXBdIGtleXMuCiAgICAgICAgZm9jdXNQcmV2aW91czogWydhcnJvd2xlZnQnLCAnYXJyb3d1cCddLAogICAgICAgIC8vIE5hdmlnYXRlIHRvb2xiYXIgaXRlbXMgZm9yd2FyZHMgdXNpbmcgdGhlIGFycm93W3JpZ2h0LGRvd25dIGtleXMuCiAgICAgICAgZm9jdXNOZXh0OiBbJ2Fycm93cmlnaHQnLCAnYXJyb3dkb3duJ10KICAgICAgfQogICAgfSk7CgogICAgX3RoaXMuc2V0VGVtcGxhdGUoewogICAgICB0YWc6ICdkaXYnLAogICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgY2xhc3M6IFsnY2snLCAnY2stdG9vbGJhcicsIGJpbmQudG8oJ2NsYXNzJyksIGJpbmQuaWYoJ2lzQ29tcGFjdCcsICdjay10b29sYmFyX2NvbXBhY3QnKV0sCiAgICAgICAgcm9sZTogJ3Rvb2xiYXInLAogICAgICAgICdhcmlhLWxhYmVsJzogYmluZC50bygnYXJpYUxhYmVsJyksCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIG1heFdpZHRoOiBiaW5kLnRvKCdtYXhXaWR0aCcpCiAgICAgICAgfQogICAgICB9LAogICAgICBjaGlsZHJlbjogX3RoaXMuY2hpbGRyZW4sCiAgICAgIG9uOiB7CiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS11aS9pc3N1ZXMvMjA2CiAgICAgICAgbW91c2Vkb3duOiBwcmV2ZW50RGVmYXVsdChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSkKICAgICAgfQogICAgfSk7CiAgICAvKioKICAgICAqIEFuIGluc3RhbmNlIG9mIHRoZSBhY3RpdmUgdG9vbGJhciBiZWhhdmlvciB0aGF0IHNoYXBlcyBpdHMgbG9vayBhbmQgZnVuY3Rpb25hbGl0eS4KICAgICAqCiAgICAgKiBTZWUge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJCZWhhdmlvcn0gdG8gbGVhcm4gbW9yZS4KICAgICAqCiAgICAgKiBAcHJvdGVjdGVkCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJCZWhhdmlvcn0KICAgICAqLwoKCiAgICBfdGhpcy5fYmVoYXZpb3IgPSBfdGhpcy5vcHRpb25zLnNob3VsZEdyb3VwV2hlbkZ1bGwgPyBuZXcgRHluYW1pY0dyb3VwaW5nKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSA6IG5ldyBTdGF0aWNMYXlvdXQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgcmV0dXJuIF90aGlzOwogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFRvb2xiYXJWaWV3LCBbewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoVG9vbGJhclZpZXcucHJvdG90eXBlKSwgInJlbmRlciIsIHRoaXMpLmNhbGwodGhpcyk7IC8vIENoaWxkcmVuIGFkZGVkIGJlZm9yZSByZW5kZXJpbmcgc2hvdWxkIGJlIGtub3duIHRvIHRoZSAjZm9jdXNUcmFja2VyLgoKCiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGhpcy5pdGVtc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICB0aGlzLmZvY3VzVHJhY2tlci5hZGQoaXRlbS5lbGVtZW50KTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuaXRlbXMub24oJ2FkZCcsIGZ1bmN0aW9uIChldnQsIGl0ZW0pIHsKICAgICAgICBfdGhpczIuZm9jdXNUcmFja2VyLmFkZChpdGVtLmVsZW1lbnQpOwogICAgICB9KTsKICAgICAgdGhpcy5pdGVtcy5vbigncmVtb3ZlJywgZnVuY3Rpb24gKGV2dCwgaXRlbSkgewogICAgICAgIF90aGlzMi5mb2N1c1RyYWNrZXIucmVtb3ZlKGl0ZW0uZWxlbWVudCk7CiAgICAgIH0pOyAvLyBTdGFydCBsaXN0ZW5pbmcgZm9yIHRoZSBrZXlzdHJva2VzIGNvbWluZyBmcm9tICNlbGVtZW50LgoKICAgICAgdGhpcy5rZXlzdHJva2VzLmxpc3RlblRvKHRoaXMuZWxlbWVudCk7CgogICAgICB0aGlzLl9iZWhhdmlvci5yZW5kZXIodGhpcyk7CiAgICB9CiAgICAvKioKICAgICAqIEBpbmhlcml0RG9jCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZGVzdHJveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsKICAgICAgdGhpcy5fYmVoYXZpb3IuZGVzdHJveSgpOwoKICAgICAgcmV0dXJuIF9nZXQoX2dldFByb3RvdHlwZU9mKFRvb2xiYXJWaWV3LnByb3RvdHlwZSksICJkZXN0cm95IiwgdGhpcykuY2FsbCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogRm9jdXNlcyB0aGUgZmlyc3QgZm9jdXNhYmxlIGluIHtAbGluayAjZm9jdXNhYmxlc30uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZm9jdXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvY3VzKCkgewogICAgICB0aGlzLl9mb2N1c0N5Y2xlci5mb2N1c0ZpcnN0KCk7CiAgICB9CiAgICAvKioKICAgICAqIEZvY3VzZXMgdGhlIGxhc3QgZm9jdXNhYmxlIGluIHtAbGluayAjZm9jdXNhYmxlc30uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZm9jdXNMYXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb2N1c0xhc3QoKSB7CiAgICAgIHRoaXMuX2ZvY3VzQ3ljbGVyLmZvY3VzTGFzdCgpOwogICAgfQogICAgLyoqCiAgICAgKiBBIHV0aWxpdHkgdGhhdCBleHBhbmRzIHRoZSBwbGFpbiB0b29sYmFyIGNvbmZpZ3VyYXRpb24gaW50bwogICAgICoge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2l0ZW1zfSB1c2luZyBhIGdpdmVuIGNvbXBvbmVudCBmYWN0b3J5LgogICAgICoKICAgICAqIEBwYXJhbSB7QXJyYXkuPFN0cmluZz59IGNvbmZpZyBUaGUgdG9vbGJhciBpdGVtcyBjb25maWd1cmF0aW9uLgogICAgICogQHBhcmFtIHttb2R1bGU6dWkvY29tcG9uZW50ZmFjdG9yeX5Db21wb25lbnRGYWN0b3J5fSBmYWN0b3J5IEEgZmFjdG9yeSBwcm9kdWNpbmcgdG9vbGJhciBpdGVtcy4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmaWxsRnJvbUNvbmZpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsbEZyb21Db25maWcoY29uZmlnLCBmYWN0b3J5KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgY29uZmlnLm1hcChmdW5jdGlvbiAobmFtZSkgewogICAgICAgIGlmIChuYW1lID09ICd8JykgewogICAgICAgICAgX3RoaXMzLml0ZW1zLmFkZChuZXcgVG9vbGJhclNlcGFyYXRvclZpZXcoKSk7CiAgICAgICAgfSBlbHNlIGlmIChmYWN0b3J5LmhhcyhuYW1lKSkgewogICAgICAgICAgX3RoaXMzLml0ZW1zLmFkZChmYWN0b3J5LmNyZWF0ZShuYW1lKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8qKgogICAgICAgICAgICogVGhlcmUgd2FzIGEgcHJvYmxlbSBwcm9jZXNzaW5nIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSB0b29sYmFyLiBUaGUgaXRlbSB3aXRoIHRoZSBnaXZlbgogICAgICAgICAgICogbmFtZSBkb2VzIG5vdCBleGlzdCBzbyBpdCB3YXMgb21pdHRlZCB3aGVuIHJlbmRlcmluZyB0aGUgdG9vbGJhci4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBUaGlzIHdhcm5pbmcgdXN1YWxseSBzaG93cyB1cCB3aGVuIHRoZSB7QGxpbmsgbW9kdWxlOmNvcmUvcGx1Z2luflBsdWdpbn0gd2hpY2ggaXMgc3VwcG9zZWQKICAgICAgICAgICAqIHRvIHByb3ZpZGUgYSB0b29sYmFyIGl0ZW0gaGFzIG5vdCBiZWVuIGxvYWRlZCBvciB0aGVyZSBpcyBhIHR5cG8gaW4gdGhlIGNvbmZpZ3VyYXRpb24uCiAgICAgICAgICAgKgogICAgICAgICAgICogTWFrZSBzdXJlIHRoZSBwbHVnaW4gcmVzcG9uc2libGUgZm9yIHRoaXMgdG9vbGJhciBpdGVtIGlzIGxvYWRlZCBhbmQgdGhlIHRvb2xiYXIgY29uZmlndXJhdGlvbgogICAgICAgICAgICogaXMgY29ycmVjdCwgZS5nLiB7QGxpbmsgbW9kdWxlOmJhc2ljLXN0eWxlcy9ib2xkfkJvbGR9IGlzIGxvYWRlZCBmb3IgdGhlIGAnYm9sZCdgIHRvb2xiYXIgaXRlbS4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBZb3UgY2FuIHVzZSB0aGUgZm9sbG93aW5nIHNuaXBwZXQgdG8gcmV0cmlldmUgYWxsIGF2YWlsYWJsZSB0b29sYmFyIGl0ZW1zOgogICAgICAgICAgICoKICAgICAgICAgICAqCQlBcnJheS5mcm9tKCBlZGl0b3IudWkuY29tcG9uZW50RmFjdG9yeS5uYW1lcygpICk7CiAgICAgICAgICAgKgogICAgICAgICAgICogQGVycm9yIHRvb2xiYXJ2aWV3LWl0ZW0tdW5hdmFpbGFibGUKICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjb21wb25lbnQuCiAgICAgICAgICAgKi8KICAgICAgICAgIGNvbnNvbGUud2FybihhdHRhY2hMaW5rVG9Eb2N1bWVudGF0aW9uKCd0b29sYmFydmlldy1pdGVtLXVuYXZhaWxhYmxlOiBUaGUgcmVxdWVzdGVkIHRvb2xiYXIgaXRlbSBpcyB1bmF2YWlsYWJsZS4nKSwgewogICAgICAgICAgICBuYW1lOiBuYW1lCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRvb2xiYXJWaWV3Owp9KFZpZXcpOwovKioKICogQW4gaW5uZXIgYmxvY2sgb2YgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlld30gaG9zdGluZyBpdHMKICoge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2l0ZW1zfS4KICoKICogQHByaXZhdGUKICogQGV4dGVuZHMgbW9kdWxlOnVpL3ZpZXd+VmlldwogKi8KCgpleHBvcnQgeyBUb29sYmFyVmlldyBhcyBkZWZhdWx0IH07Cgp2YXIgSXRlbXNWaWV3ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1ZpZXcyKSB7CiAgX2luaGVyaXRzKEl0ZW1zVmlldywgX1ZpZXcyKTsKCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICBmdW5jdGlvbiBJdGVtc1ZpZXcobG9jYWxlKSB7CiAgICB2YXIgX3RoaXM0OwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJdGVtc1ZpZXcpOwoKICAgIF90aGlzNCA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihJdGVtc1ZpZXcpLmNhbGwodGhpcywgbG9jYWxlKSk7CiAgICAvKioKICAgICAqIEEgY29sbGVjdGlvbiBvZiBpdGVtcyAoYnV0dG9ucywgZHJvcGRvd25zLCBldGMuKS4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1aS92aWV3Y29sbGVjdGlvbn5WaWV3Q29sbGVjdGlvbn0KICAgICAqLwoKICAgIF90aGlzNC5jaGlsZHJlbiA9IF90aGlzNC5jcmVhdGVDb2xsZWN0aW9uKCk7CgogICAgX3RoaXM0LnNldFRlbXBsYXRlKHsKICAgICAgdGFnOiAnZGl2JywKICAgICAgYXR0cmlidXRlczogewogICAgICAgIGNsYXNzOiBbJ2NrJywgJ2NrLXRvb2xiYXJfX2l0ZW1zJ10KICAgICAgfSwKICAgICAgY2hpbGRyZW46IF90aGlzNC5jaGlsZHJlbgogICAgfSk7CgogICAgcmV0dXJuIF90aGlzNDsKICB9CgogIHJldHVybiBJdGVtc1ZpZXc7Cn0oVmlldyk7Ci8qKgogKiBBIHRvb2xiYXIgYmVoYXZpb3IgdGhhdCBtYWtlcyBpdCBzdGF0aWMgYW5kIHVucmVzcG9uc2l2ZSB0byB0aGUgY2hhbmdlcyBvZiB0aGUgZW52aXJvbm1lbnQuCiAqIEF0IHRoZSBzYW1lIHRpbWUsIGl0IGFsc28gbWFrZXMgaXQgcG9zc2libGUgdG8gZGlzcGxheSBhIHRvb2xiYXIgd2l0aCBhIHZlcnRpY2FsIGxheW91dAogKiB1c2luZyB0aGUge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2lzVmVydGljYWx9IHByb3BlcnR5LgogKgogKiBAcHJpdmF0ZQogKiBAaW1wbGVtZW50cyBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyQmVoYXZpb3IKICovCgoKdmFyIFN0YXRpY0xheW91dCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIC8qKgogICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35TdGF0aWNMYXlvdXR9IHRvb2xiYXIKICAgKiBiZWhhdmlvci4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXd9IHZpZXcgQW4gaW5zdGFuY2Ugb2YgdGhlIHRvb2xiYXIgdGhhdCB0aGlzIGJlaGF2aW9yCiAgICogaXMgYWRkZWQgdG8uCiAgICovCiAgZnVuY3Rpb24gU3RhdGljTGF5b3V0KHZpZXcpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGF0aWNMYXlvdXQpOwoKICAgIHZhciBiaW5kID0gdmlldy5iaW5kVGVtcGxhdGU7IC8vIFN0YXRpYyB0b29sYmFyIGNhbiBiZSB2ZXJ0aWNhbCB3aGVuIG5lZWRlZC4KCiAgICB2aWV3LnNldCgnaXNWZXJ0aWNhbCcsIGZhbHNlKTsgLy8gMToxIHBhc3PigJN0aHJvdWdoIGJpbmRpbmcsIGFsbCBUb29sYmFyVmlldyNpdGVtcyBhcmUgdmlzaWJsZS4KCiAgICB2aWV3Lml0ZW1zVmlldy5jaGlsZHJlbi5iaW5kVG8odmlldy5pdGVtcykudXNpbmcoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW07CiAgICB9KTsgLy8gMToxIHBhc3PigJN0aHJvdWdoIGJpbmRpbmcsIGFsbCBUb29sYmFyVmlldyNpdGVtcyBhcmUgZm9jdXNhYmxlLgoKICAgIHZpZXcuZm9jdXNhYmxlcy5iaW5kVG8odmlldy5pdGVtcykudXNpbmcoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW07CiAgICB9KTsKICAgIHZpZXcuZXh0ZW5kVGVtcGxhdGUoewogICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgY2xhc3M6IFsvLyBXaGVuIHZlcnRpY2FsLCB0aGUgdG9vbGJhciBoYXMgYW4gYWRkaXRpb25hbCBDU1MgY2xhc3MuCiAgICAgICAgYmluZC5pZignaXNWZXJ0aWNhbCcsICdjay10b29sYmFyX3ZlcnRpY2FsJyldCiAgICAgIH0KICAgIH0pOwogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFN0YXRpY0xheW91dCwgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge30KICAgIC8qKgogICAgICogQGluaGVyaXREb2MKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkZXN0cm95IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge30KICB9XSk7CgogIHJldHVybiBTdGF0aWNMYXlvdXQ7Cn0oKTsKLyoqCiAqIEEgdG9vbGJhciBiZWhhdmlvciB0aGF0IG1ha2VzIHRoZSBpdGVtcyByZXNwb25kIHRvIGNoYW5nZXMgaW4gdGhlIGdlb21ldHJ5LgogKgogKiBJbiBhIG51dHNoZWxsLCBpdCBncm91cHMge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2l0ZW1zfQogKiB0aGF0IGRvIG5vdCBmaXQgdmlzdWFsbHkgaW50byBhIHNpbmdsZSByb3cgb2YgdGhlIHRvb2xiYXIgKGR1ZSB0byBsaW1pdGVkIHNwYWNlKS4KICogSXRlbXMgdGhhdCBkbyBub3QgZml0IGFyZSBhZ2dyZWdhdGVkIGluIGEgZHJvcGRvd24gZGlzcGxheWVkIGF0IHRoZSBlbmQgb2YgdGhlIHRvb2xiYXIuCiAqCiAqCeKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBUb29sYmFyVmlldyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAKICoJfCDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgI2NoaWxkcmVuIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCB8CiAqCXwgfCAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAjaXRlbXNWaWV3IOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAg4pSM4pSA4pSAICNncm91cGVkSXRlbXNEcm9wZG93biDilIDilIDilIDilJAgICB8IHwKICoJfCB8ICAgfCAgICAgICAjdW5ncm91cGVkSXRlbXMgICAgIHwgfCBUb29sYmFyU2VwYXJhdG9yVmlldyB8IHwgICAgICAgICNncm91cGVkSXRlbXMgICAgICAgfCAgIHwgfAogKgl8IHwgICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAt4pSYIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJggICB8IHwKICoJfCB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwtLS0tLS0tLS0tIG9ubHkgd2hlbiB0b29sYmFyIGl0ZW1zIG92ZXJmbG93IC0tLS0tLS0tLyAgICB8IHwKICoJfCDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJggfAogKgnilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJgKICoKICogQHByaXZhdGUKICogQGltcGxlbWVudHMgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhckJlaGF2aW9yCiAqLwoKCnZhciBEeW5hbWljR3JvdXBpbmcgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICAvKioKICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+RHluYW1pY0dyb3VwaW5nfSB0b29sYmFyCiAgICogYmVoYXZpb3IuCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3fSB2aWV3IEFuIGluc3RhbmNlIG9mIHRoZSB0b29sYmFyIHRoYXQgdGhpcyBiZWhhdmlvcgogICAqIGlzIGFkZGVkIHRvLgogICAqLwogIGZ1bmN0aW9uIER5bmFtaWNHcm91cGluZyh2aWV3KSB7CiAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHluYW1pY0dyb3VwaW5nKTsKCiAgICAvKioKICAgICAqIEEgY29sbGVjdGlvbiBvZiB0b29sYmFyIGNoaWxkcmVuLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL3ZpZXdjb2xsZWN0aW9uflZpZXdDb2xsZWN0aW9ufQogICAgICovCiAgICB0aGlzLnZpZXdDaGlsZHJlbiA9IHZpZXcuY2hpbGRyZW47CiAgICAvKioKICAgICAqIEEgY29sbGVjdGlvbiBvZiBmb2N1c2FibGUgdG9vbGJhciBlbGVtZW50cy4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1aS92aWV3Y29sbGVjdGlvbn5WaWV3Q29sbGVjdGlvbn0KICAgICAqLwoKICAgIHRoaXMudmlld0ZvY3VzYWJsZXMgPSB2aWV3LmZvY3VzYWJsZXM7CiAgICAvKioKICAgICAqIEEgdmlldyBjb250YWluaW5nIHRvb2xiYXIgaXRlbXMuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35JdGVtc1ZpZXd9CiAgICAgKi8KCiAgICB0aGlzLnZpZXdJdGVtc1ZpZXcgPSB2aWV3Lml0ZW1zVmlldzsKICAgIC8qKgogICAgICogVG9vbGJhciBmb2N1cyB0cmFja2VyLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnV0aWxzL2ZvY3VzdHJhY2tlcn5Gb2N1c1RyYWNrZXJ9CiAgICAgKi8KCiAgICB0aGlzLnZpZXdGb2N1c1RyYWNrZXIgPSB2aWV3LmZvY3VzVHJhY2tlcjsKICAgIC8qKgogICAgICogVG9vbGJhciBsb2NhbGUuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dXRpbHMvbG9jYWxlfkxvY2FsZX0KICAgICAqLwoKICAgIHRoaXMudmlld0xvY2FsZSA9IHZpZXcubG9jYWxlOwogICAgLyoqCiAgICAgKiBUb29sYmFyIGVsZW1lbnQuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHtIVE1MRWxlbWVudH0gI3ZpZXdFbGVtZW50CiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgc3Vic2V0IG9mIHRvb2xiYXIge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2l0ZW1zfS4KICAgICAqIEFnZ3JlZ2F0ZXMgaXRlbXMgdGhhdCBmaXQgaW50byBhIHNpbmdsZSByb3cgb2YgdGhlIHRvb2xiYXIgYW5kIHdlcmUgbm90IHtAbGluayAjZ3JvdXBlZEl0ZW1zIGdyb3VwZWR9CiAgICAgKiBpbnRvIGEge0BsaW5rICNncm91cGVkSXRlbXNEcm9wZG93biBkcm9wZG93bn0uIEl0ZW1zIG9mIHRoaXMgY29sbGVjdGlvbiBhcmUgZGlzcGxheWVkIGluIHRoZQogICAgICoge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2l0ZW1zVmlld30uCiAgICAgKgogICAgICogV2hlbiBub25lIG9mIHRoZSB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjaXRlbXN9IHdlcmUgZ3JvdXBlZCwgaXQKICAgICAqIG1hdGNoZXMgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNpdGVtc30gY29sbGVjdGlvbiBpbiBzaXplIGFuZCBvcmRlci4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge21vZHVsZTp1aS92aWV3Y29sbGVjdGlvbn5WaWV3Q29sbGVjdGlvbn0KICAgICAqLwoKICAgIHRoaXMudW5ncm91cGVkSXRlbXMgPSB2aWV3LmNyZWF0ZUNvbGxlY3Rpb24oKTsKICAgIC8qKgogICAgICogQSBzdWJzZXQgb2YgdG9vbGJhciB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjaXRlbXN9LgogICAgICogQSBjb2xsZWN0aW9uIG9mIHRoZSB0b29sYmFyIGl0ZW1zIHRoYXQgZG8gbm90IGZpdCBpbnRvIGEgc2luZ2xlIHJvdyBvZiB0aGUgdG9vbGJhci4KICAgICAqIEdyb3VwZWQgaXRlbXMgYXJlIGRpc3BsYXllZCBpbiBhIGRlZGljYXRlZCB7QGxpbmsgI2dyb3VwZWRJdGVtc0Ryb3Bkb3duIGRyb3Bkb3dufS4KICAgICAqCiAgICAgKiBXaGVuIG5vbmUgb2YgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNpdGVtc30gd2VyZSBncm91cGVkLAogICAgICogdGhpcyBjb2xsZWN0aW9uIGlzIGVtcHR5LgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOnVpL3ZpZXdjb2xsZWN0aW9uflZpZXdDb2xsZWN0aW9ufQogICAgICovCgogICAgdGhpcy5ncm91cGVkSXRlbXMgPSB2aWV3LmNyZWF0ZUNvbGxlY3Rpb24oKTsKICAgIC8qKgogICAgICogVGhlIGRyb3Bkb3duIHRoYXQgYWdncmVnYXRlcyB7QGxpbmsgI2dyb3VwZWRJdGVtcyBncm91cGVkIGl0ZW1zfSB0aGF0IGRvIG5vdCBmaXQgaW50byBhIHNpbmdsZQogICAgICogcm93IG9mIHRoZSB0b29sYmFyLiBJdCBpcyBkaXNwbGF5ZWQgb24gZGVtYW5kIGFzIHRoZSBsYXN0IG9mCiAgICAgKiB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjY2hpbGRyZW4gdG9vbGJhciBjaGlsZHJlbn0gYW5kIG9mZmVycyBhbm90aGVyCiAgICAgKiAobmVzdGVkKSB0b29sYmFyIHdoaWNoIGRpc3BsYXlzIGl0ZW1zIHRoYXQgd291bGQgbm9ybWFsbHkgb3ZlcmZsb3cuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dWkvZHJvcGRvd24vZHJvcGRvd252aWV3fkRyb3Bkb3duVmlld30KICAgICAqLwoKICAgIHRoaXMuZ3JvdXBlZEl0ZW1zRHJvcGRvd24gPSB0aGlzLl9jcmVhdGVHcm91cGVkSXRlbXNEcm9wZG93bigpOwogICAgLyoqCiAgICAgKiBBbiBpbnN0YW5jZSBvZiB0aGUgcmVzaXplIG9ic2VydmVyIHRoYXQgaGVscHMgZHluYW1pY2FsbHkgZGV0ZXJtaW5lIHRoZSBnZW9tZXRyeSBvZiB0aGUgdG9vbGJhcgogICAgICogYW5kIG1hbmFnZSBpdGVtcyB0aGF0IGRvIG5vdCBmaXQgaW50byBhIHNpbmdsZSByb3cuCiAgICAgKgogICAgICogKipOb3RlOioqIENyZWF0ZWQgaW4ge0BsaW5rICNfZW5hYmxlR3JvdXBpbmdPblJlc2l6ZX0uCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6dXRpbHMvZG9tL3Jlc2l6ZW9ic2VydmVyflJlc2l6ZU9ic2VydmVyfQogICAgICovCgogICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG51bGw7CiAgICAvKioKICAgICAqIEEgY2FjaGVkIHZhbHVlIG9mIHRoZSBob3Jpem9udGFsIHBhZGRpbmcgc3R5bGUgdXNlZCBieSB7QGxpbmsgI191cGRhdGVHcm91cGluZ30KICAgICAqIHRvIG1hbmFnZSB0aGUge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2l0ZW1zfSB0aGF0IGRvIG5vdCBmaXQgaW50bwogICAgICogYSBzaW5nbGUgdG9vbGJhciBsaW5lLiBUaGlzIHZhbHVlIGNhbiBiZSByZXVzZWQgYmV0d2VlbiB1cGRhdGVzIGJlY2F1c2UgaXQgaXMgdW5saWtlbHkgdGhhdAogICAgICogdGhlIHBhZGRpbmcgd2lsbCBjaGFuZ2UgYW5kIHJl4oCTdXNpbmcgYFdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKClgIGlzIGV4cGVuc2l2ZS4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEBtZW1iZXIge051bWJlcn0KICAgICAqLwoKICAgIHRoaXMuY2FjaGVkUGFkZGluZyA9IG51bGw7IC8vIE9ubHkgdGhvc2UgaXRlbXMgdGhhdCB3ZXJlIG5vdCBncm91cGVkIGFyZSB2aXNpYmxlIHRvIHRoZSB1c2VyLgoKICAgIHZpZXcuaXRlbXNWaWV3LmNoaWxkcmVuLmJpbmRUbyh0aGlzLnVuZ3JvdXBlZEl0ZW1zKS51c2luZyhmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbTsKICAgIH0pOyAvLyBNYWtlIHN1cmUgYWxsICNpdGVtcyB2aXNpYmxlIGluIHRoZSBtYWluIHNwYWNlIG9mIHRoZSB0b29sYmFyIGFyZSAiZm9jdXNjeWNsZWFibGUiLgoKICAgIHRoaXMudW5ncm91cGVkSXRlbXMub24oJ2FkZCcsIHRoaXMuX3VwZGF0ZUZvY3VzQ3ljbGVhYmxlSXRlbXMuYmluZCh0aGlzKSk7CiAgICB0aGlzLnVuZ3JvdXBlZEl0ZW1zLm9uKCdyZW1vdmUnLCB0aGlzLl91cGRhdGVGb2N1c0N5Y2xlYWJsZUl0ZW1zLmJpbmQodGhpcykpOyAvLyBNYWtlIHN1cmUgdGhlICNncm91cGVkSXRlbXNEcm9wZG93biBpcyBhbHNvIGluY2x1ZGVkIGluIGN5Y2xpbmcgd2hlbiBpdCBhcHBlYXJzLgoKICAgIHZpZXcuY2hpbGRyZW4ub24oJ2FkZCcsIHRoaXMuX3VwZGF0ZUZvY3VzQ3ljbGVhYmxlSXRlbXMuYmluZCh0aGlzKSk7CiAgICB2aWV3LmNoaWxkcmVuLm9uKCdyZW1vdmUnLCB0aGlzLl91cGRhdGVGb2N1c0N5Y2xlYWJsZUl0ZW1zLmJpbmQodGhpcykpOyAvLyBUb29sYmFyVmlldyNpdGVtcyBpcyBkeW5hbWljLiBXaGVuIGFuIGl0ZW0gaXMgYWRkZWQsIGl0IHNob3VsZCBiZSBhdXRvbWF0aWNhbGx5CiAgICAvLyByZXByZXNlbnRlZCBpbiBlaXRoZXIgZ3JvdXBlZCBvciB1bmdyb3VwZWQgaXRlbXMgYXQgdGhlIHJpZ2h0IGluZGV4LgogICAgLy8gSW4gb3RoZXIgd29yZHMgI2l0ZW1zID09IGNvbmNhdCggI3VuZ3JvdXBlZEl0ZW1zLCAjZ3JvdXBlZEl0ZW1zICkKICAgIC8vIChpbiBsZW5ndGggYW5kIG9yZGVyKS4KCiAgICB2aWV3Lml0ZW1zLm9uKCdhZGQnLCBmdW5jdGlvbiAoZXZ0LCBpdGVtLCBpbmRleCkgewogICAgICBpZiAoaW5kZXggPiBfdGhpczUudW5ncm91cGVkSXRlbXMubGVuZ3RoKSB7CiAgICAgICAgX3RoaXM1Lmdyb3VwZWRJdGVtcy5hZGQoaXRlbSwgaW5kZXggLSBfdGhpczUudW5ncm91cGVkSXRlbXMubGVuZ3RoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpczUudW5ncm91cGVkSXRlbXMuYWRkKGl0ZW0sIGluZGV4KTsKICAgICAgfSAvLyBXaGVuIGEgbmV3IHVuZ3JvdXBlZCBpdGVtIGpvaW5zIGluIGFuZCBsYW5kcyBpbiAjdW5ncm91cGVkSXRlbXMsIHRoZXJlJ3MgYSBjaGFuY2UgaXQgY2F1c2VzCiAgICAgIC8vIHRoZSB0b29sYmFyIHRvIG92ZXJmbG93LgoKCiAgICAgIF90aGlzNS5fdXBkYXRlR3JvdXBpbmcoKTsKICAgIH0pOyAvLyBXaGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCBmcm9tIFRvb2xiYXJWaWV3I2l0ZW1zLCBpdCBzaG91bGQgYmUgYXV0b21hdGljYWxseQogICAgLy8gcmVtb3ZlZCBmcm9tIGVpdGhlciBncm91cGVkIG9yIHVuZ3JvdXBlZCBpdGVtcy4KCiAgICB2aWV3Lml0ZW1zLm9uKCdyZW1vdmUnLCBmdW5jdGlvbiAoZXZ0LCBpdGVtLCBpbmRleCkgewogICAgICBpZiAoaW5kZXggPiBfdGhpczUudW5ncm91cGVkSXRlbXMubGVuZ3RoKSB7CiAgICAgICAgX3RoaXM1Lmdyb3VwZWRJdGVtcy5yZW1vdmUoaXRlbSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXM1LnVuZ3JvdXBlZEl0ZW1zLnJlbW92ZShpdGVtKTsKICAgICAgfSAvLyBXaGV0aGVyIHJlbW92ZWQgZnJvbSBncm91cGVkIG9yIHVuZ3JvdXBlZCBpdGVtcywgdGhlcmUgaXMgYSBjaGFuY2UKICAgICAgLy8gc29tZSBuZXcgc3BhY2UgaXMgYXZhaWxhYmxlIGFuZCB3ZSBjb3VsZCBkbyBzb21lIHVuZ3JvdXBpbmcuCgoKICAgICAgX3RoaXM1Ll91cGRhdGVHcm91cGluZygpOwogICAgfSk7CiAgICB2aWV3LmV4dGVuZFRlbXBsYXRlKHsKICAgICAgYXR0cmlidXRlczogewogICAgICAgIGNsYXNzOiBbLy8gVG8gZ3JvdXAgaXRlbXMgZHluYW1pY2FsbHksIHRoZSB0b29sYmFyIG5lZWRzIGEgZGVkaWNhdGVkIENTUyBjbGFzcy4KICAgICAgICAnY2stdG9vbGJhcl9ncm91cGluZyddCiAgICAgIH0KICAgIH0pOwogIH0KICAvKioKICAgKiBFbmFibGVzIGR5bmFtaWMgaXRlbXMgZ3JvdXBpbmcgYmFzZWQgb24gdGhlIGRpbWVuc2lvbnMgb2YgdGhlIHRvb2xiYXIuCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3fSB2aWV3IEFuIGluc3RhbmNlIG9mIHRoZSB0b29sYmFyIHRoYXQgdGhpcyBiZWhhdmlvcgogICAqIGlzIGFkZGVkIHRvLgogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKER5bmFtaWNHcm91cGluZywgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKHZpZXcpIHsKICAgICAgdGhpcy52aWV3RWxlbWVudCA9IHZpZXcuZWxlbWVudDsKCiAgICAgIHRoaXMuX2VuYWJsZUdyb3VwaW5nT25SZXNpemUoKTsKCiAgICAgIHRoaXMuX2VuYWJsZUdyb3VwaW5nT25NYXhXaWR0aENoYW5nZSh2aWV3KTsKICAgIH0KICAgIC8qKgogICAgICogQ2xlYW5zIHVwIHRoZSBpbnRlcm5hbHMgdXNlZCBieSB0aGlzIGJlaGF2aW9yLgogICAgICovCgogIH0sIHsKICAgIGtleTogImRlc3Ryb3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgICAgIC8vIFRoZSBkcm9wZG93biBtYXkgbm90IGJlIGluIFRvb2xiYXJWaWV3I2NoaWxkcmVuIGF0IHRoZSBtb21lbnQgb2YgdG9vbGJhciBkZXN0cnVjdGlvbgogICAgICAvLyBzbyBsZXQncyBtYWtlIHN1cmUgaXQncyBhY3R1YWxseSBkZXN0cm95ZWQgYWxvbmcgd2l0aCB0aGUgdG9vbGJhci4KICAgICAgdGhpcy5ncm91cGVkSXRlbXNEcm9wZG93bi5kZXN0cm95KCk7CiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIuZGVzdHJveSgpOwogICAgfQogICAgLyoqCiAgICAgKiBXaGVuIGNhbGxlZCwgaXQgd2lsbCBjaGVjayBpZiBhbnkgb2YgdGhlIHtAbGluayAjdW5ncm91cGVkSXRlbXN9IGRvIG5vdCBmaXQgaW50byBhIHNpbmdsZSByb3cgb2YgdGhlIHRvb2xiYXIsCiAgICAgKiBhbmQgaXQgd2lsbCBtb3ZlIHRoZW0gdG8gdGhlIHtAbGluayAjZ3JvdXBlZEl0ZW1zfSB3aGVuIGl0IGhhcHBlbnMuCiAgICAgKgogICAgICogQXQgdGhlIHNhbWUgdGltZSwgaXQgd2lsbCBhbHNvIGNoZWNrIGlmIHRoZXJlIGlzIGVub3VnaCBzcGFjZSBpbiB0aGUgdG9vbGJhciBmb3IgdGhlIGZpcnN0IG9mIHRoZQogICAgICoge0BsaW5rICNncm91cGVkSXRlbXN9IHRvIGJlIHJldHVybmVkIGJhY2sgdG8ge0BsaW5rICN1bmdyb3VwZWRJdGVtc30gYW5kIHN0aWxsIGZpdCBpbnRvIGEgc2luZ2xlIHJvdwogICAgICogd2l0aG91dCB0aGUgdG9vbGJhciB3cmFwcGluZy4KICAgICAqCiAgICAgKiBAcHJvdGVjdGVkCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiX3VwZGF0ZUdyb3VwaW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlR3JvdXBpbmcoKSB7CiAgICAgIC8vIERvIG5vIGdyb3VwaW5n4oCTcmVsYXRlZCBnZW9tZXRyeSBhbmFseXNpcyB3aGVuIHRoZSB0b29sYmFyIGlzIGRldGFjaGVkIGZyb20gdmlzaWJsZSBET00sCiAgICAgIC8vIGZvciBpbnN0YW5jZSBiZWZvcmUgI3JlbmRlcigpLCBvciBhZnRlciByZW5kZXIgYnV0IHdpdGhvdXQgYSBwYXJlbnQgb3IgYSBwYXJlbnQgZGV0YWNoZWQKICAgICAgLy8gZnJvbSBET00uIERPTVJlY3RzIHdvbid0IHdvcmsgYW55d2F5IGFuZCB0aGVyZSB3aWxsIGJlIHRvbnMgb2Ygd2FybmluZyBpbiB0aGUgY29uc29sZSBhbmQKICAgICAgLy8gbm90aGluZyBlbHNlLgogICAgICBpZiAoIXRoaXMudmlld0VsZW1lbnQub3duZXJEb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMudmlld0VsZW1lbnQpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgd2VyZUl0ZW1zR3JvdXBlZDsgLy8gR3JvdXAgI2l0ZW1zIGFzIGxvbmcgYXMgc29tZSB3cmFwIHRvIHRoZSBuZXh0IHJvdy4gVGhpcyB3aWxsIGhhcHBlbiwgZm9yIGluc3RhbmNlLAogICAgICAvLyB3aGVuIHRoZSB0b29sYmFyIGlzIGdldHRpbmcgbmFycm93IGFuZCB0aGVyZSBpcyBub3QgZW5vdWdoIHNwYWNlIHRvIGRpc3BsYXkgYWxsIGl0ZW1zIGluCiAgICAgIC8vIGEgc2luZ2xlIHJvdy4KCiAgICAgIHdoaWxlICh0aGlzLl9hcmVJdGVtc092ZXJmbG93aW5nKSB7CiAgICAgICAgdGhpcy5fZ3JvdXBMYXN0SXRlbSgpOwoKICAgICAgICB3ZXJlSXRlbXNHcm91cGVkID0gdHJ1ZTsKICAgICAgfSAvLyBJZiBub25lIHdlcmUgZ3JvdXBlZCBub3cgYnV0IHRoZXJlIHdlcmUgc29tZSBpdGVtcyBhbHJlYWR5IGdyb3VwZWQgYmVmb3JlLAogICAgICAvLyB0aGVuLCB3aGF0IHRoZSBoZWxsLCBtYXliZSBsZXQncyBzZWUgaWYgc29tZSBvZiB0aGVtIGNhbiBiZSB1bmdyb3VwZWQuIFRoaXMgaGFwcGVucyB3aGVuLAogICAgICAvLyBmb3IgaW5zdGFuY2UsIHRoZSB0b29sYmFyIGlzIHN0cmV0Y2hpbmcgYW5kIHRoZXJlJ3MgbW9yZSBzcGFjZSBpbiBpdCB0aGFuIGJlZm9yZS4KCgogICAgICBpZiAoIXdlcmVJdGVtc0dyb3VwZWQgJiYgdGhpcy5ncm91cGVkSXRlbXMubGVuZ3RoKSB7CiAgICAgICAgLy8gVW5ncm91cCBpdGVtcyBhcyBsb25nIGFzIG5vbmUgYXJlIG92ZXJmbG93aW5nIG9yIHRoZXJlIGFyZSBub25lIHRvIHVuZ3JvdXAgbGVmdC4KICAgICAgICB3aGlsZSAodGhpcy5ncm91cGVkSXRlbXMubGVuZ3RoICYmICF0aGlzLl9hcmVJdGVtc092ZXJmbG93aW5nKSB7CiAgICAgICAgICB0aGlzLl91bmdyb3VwRmlyc3RJdGVtKCk7CiAgICAgICAgfSAvLyBJZiB0aGUgdW5ncm91cGluZyBlbmRlZCB1cCB3aXRoIHNvbWUgaXRlbSB3cmFwcGluZyB0byB0aGUgbmV4dCByb3csCiAgICAgICAgLy8gcHV0IGl0IGJhY2sgdG8gdGhlIGdyb3VwIHRvb2xiYXIgKCJ1bmRvIHRoZSBsYXN0IHVuZ3JvdXAiKS4gV2UgZG9uJ3Qga25vdyB3aGV0aGVyCiAgICAgICAgLy8gYW4gaXRlbSB3aWxsIHdyYXAgb3Igbm90IHVudGlsIHdlIHVuZ3JvdXAgaXQgKHRoYXQncyBhIERPTS9DU1MgdGhpbmcpIHNvIHRoaXMKICAgICAgICAvLyBjbGVhbuKAk3VwIGlzIHZpdGFsIGZvciB0aGUgYWxnb3JpdGhtLgoKCiAgICAgICAgaWYgKHRoaXMuX2FyZUl0ZW1zT3ZlcmZsb3dpbmcpIHsKICAgICAgICAgIHRoaXMuX2dyb3VwTGFzdEl0ZW0oKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBgdHJ1ZWAgd2hlbiB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjZWxlbWVudH0gY2hpbGRyZW4gdmlzdWFsbHkgb3ZlcmZsb3csCiAgICAgKiBmb3IgaW5zdGFuY2UgaWYgdGhlIHRvb2xiYXIgaXMgbmFycm93ZXIgdGhhbiBpdHMgbWVtYmVycy4gUmV0dXJucyBgZmFsc2VgIG90aGVyd2lzZS4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQHR5cGUge0Jvb2xlYW59CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiX2VuYWJsZUdyb3VwaW5nT25SZXNpemUiLAoKICAgIC8qKgogICAgICogRW5hYmxlcyB0aGUgZnVuY3Rpb25hbGl0eSB0aGF0IHByZXZlbnRzIHtAbGluayAjdW5ncm91cGVkSXRlbXN9IGZyb20gb3ZlcmZsb3dpbmcgKHdyYXBwaW5nIHRvIHRoZSBuZXh0IHJvdykKICAgICAqIHVwb24gcmVzaXplIHdoZW4gdGhlcmUgaXMgbGl0dGxlIHNwYWNlIGF2YWlsYWJsZS4gSW5zdGVhZCwgdGhlIHRvb2xiYXIgaXRlbXMgYXJlIG1vdmVkIHRvIHRoZQogICAgICoge0BsaW5rICNncm91cGVkSXRlbXN9IGNvbGxlY3Rpb24gYW5kIGRpc3BsYXllZCBpbiBhIGRyb3Bkb3duIGF0IHRoZSBlbmQgb2YgdGhlIHJvdyAod2hpY2ggaGFzIGl0cyBvd24gbmVzdGVkIHRvb2xiYXIpLgogICAgICoKICAgICAqIFdoZW4gY2FsbGVkLCB0aGUgdG9vbGJhciB3aWxsIGF1dG9tYXRpY2FsbHkgYW5hbHl6ZSB0aGUgbG9jYXRpb24gb2YgaXRzIHtAbGluayAjdW5ncm91cGVkSXRlbXN9IGFuZCAiZ3JvdXAiCiAgICAgKiB0aGVtIGluIHRoZSBkcm9wZG93biBpZiBuZWNlc3NhcnkuIEl0IHdpbGwgYWxzbyBvYnNlcnZlIHRoZSBicm93c2VyIHdpbmRvdyBmb3Igc2l6ZSBjaGFuZ2VzIGluCiAgICAgKiB0aGUgZnV0dXJlIGFuZCByZXNwb25kIHRvIHRoZW0gYnkgZ3JvdXBpbmcgbW9yZSBpdGVtcyBvciByZXZlcnRpbmcgYWxyZWFkeSBncm91cGVkIGJhY2ssIGRlcGVuZGluZwogICAgICogb24gdGhlIHZpc3VhbCBzcGFjZSBhdmFpbGFibGUuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIF9lbmFibGVHcm91cGluZ09uUmVzaXplKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHZhciBwcmV2aW91c1dpZHRoOyAvLyBUT0RPOiBDb25zaWRlciBkZWJvdW5jZS4KCiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIodGhpcy52aWV3RWxlbWVudCwgZnVuY3Rpb24gKGVudHJ5KSB7CiAgICAgICAgaWYgKCFwcmV2aW91c1dpZHRoIHx8IHByZXZpb3VzV2lkdGggIT09IGVudHJ5LmNvbnRlbnRSZWN0LndpZHRoKSB7CiAgICAgICAgICBfdGhpczYuX3VwZGF0ZUdyb3VwaW5nKCk7CgogICAgICAgICAgcHJldmlvdXNXaWR0aCA9IGVudHJ5LmNvbnRlbnRSZWN0LndpZHRoOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICB0aGlzLl91cGRhdGVHcm91cGluZygpOwogICAgfQogICAgLyoqCiAgICAgKiBFbmFibGVzIHRoZSBncm91cGluZyBmdW5jdGlvbmFsaXR5LCBqdXN0IGxpa2Uge0BsaW5rICNfZW5hYmxlR3JvdXBpbmdPblJlc2l6ZX0gYnV0IHRoZSBkaWZmZXJlbmNlIGlzIHRoYXQKICAgICAqIGl0IGxpc3RlbnMgdG8gdGhlIGNoYW5nZXMgb2Yge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I21heFdpZHRofSBpbnN0ZWFkLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiX2VuYWJsZUdyb3VwaW5nT25NYXhXaWR0aENoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2VuYWJsZUdyb3VwaW5nT25NYXhXaWR0aENoYW5nZSh2aWV3KSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmlldy5vbignY2hhbmdlOm1heFdpZHRoJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNy5fdXBkYXRlR3JvdXBpbmcoKTsKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIFdoZW4gY2FsbGVkLCBpdCB3aWxsIHJlbW92ZSB0aGUgbGFzdCBpdGVtIGZyb20ge0BsaW5rICN1bmdyb3VwZWRJdGVtc30gYW5kIG1vdmUgaXQgYmFjawogICAgICogdG8gdGhlIHtAbGluayAjZ3JvdXBlZEl0ZW1zfSBjb2xsZWN0aW9uLgogICAgICoKICAgICAqIFRoZSBvcHBvc2l0ZSBvZiB7QGxpbmsgI191bmdyb3VwRmlyc3RJdGVtfS4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICovCgogIH0sIHsKICAgIGtleTogIl9ncm91cExhc3RJdGVtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ3JvdXBMYXN0SXRlbSgpIHsKICAgICAgaWYgKCF0aGlzLmdyb3VwZWRJdGVtcy5sZW5ndGgpIHsKICAgICAgICB0aGlzLnZpZXdDaGlsZHJlbi5hZGQobmV3IFRvb2xiYXJTZXBhcmF0b3JWaWV3KCkpOwogICAgICAgIHRoaXMudmlld0NoaWxkcmVuLmFkZCh0aGlzLmdyb3VwZWRJdGVtc0Ryb3Bkb3duKTsKICAgICAgICB0aGlzLnZpZXdGb2N1c1RyYWNrZXIuYWRkKHRoaXMuZ3JvdXBlZEl0ZW1zRHJvcGRvd24uZWxlbWVudCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZ3JvdXBlZEl0ZW1zLmFkZCh0aGlzLnVuZ3JvdXBlZEl0ZW1zLnJlbW92ZSh0aGlzLnVuZ3JvdXBlZEl0ZW1zLmxhc3QpLCAwKTsKICAgIH0KICAgIC8qKgogICAgICogTW92ZXMgdGhlIHZlcnkgZmlyc3QgaXRlbSBiZWxvbmdpbmcgdG8ge0BsaW5rICNncm91cGVkSXRlbXN9IGJhY2sKICAgICAqIHRvIHRoZSB7QGxpbmsgI3VuZ3JvdXBlZEl0ZW1zfSBjb2xsZWN0aW9uLgogICAgICoKICAgICAqIFRoZSBvcHBvc2l0ZSBvZiB7QGxpbmsgI19ncm91cExhc3RJdGVtfS4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICovCgogIH0sIHsKICAgIGtleTogIl91bmdyb3VwRmlyc3RJdGVtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfdW5ncm91cEZpcnN0SXRlbSgpIHsKICAgICAgdGhpcy51bmdyb3VwZWRJdGVtcy5hZGQodGhpcy5ncm91cGVkSXRlbXMucmVtb3ZlKHRoaXMuZ3JvdXBlZEl0ZW1zLmZpcnN0KSk7CgogICAgICBpZiAoIXRoaXMuZ3JvdXBlZEl0ZW1zLmxlbmd0aCkgewogICAgICAgIHRoaXMudmlld0NoaWxkcmVuLnJlbW92ZSh0aGlzLmdyb3VwZWRJdGVtc0Ryb3Bkb3duKTsKICAgICAgICB0aGlzLnZpZXdDaGlsZHJlbi5yZW1vdmUodGhpcy52aWV3Q2hpbGRyZW4ubGFzdCk7CiAgICAgICAgdGhpcy52aWV3Rm9jdXNUcmFja2VyLnJlbW92ZSh0aGlzLmdyb3VwZWRJdGVtc0Ryb3Bkb3duLmVsZW1lbnQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZXMgdGhlIHtAbGluayAjZ3JvdXBlZEl0ZW1zRHJvcGRvd259IHRoYXQgaG9zdHMgdGhlIG1lbWJlcnMgb2YgdGhlIHtAbGluayAjZ3JvdXBlZEl0ZW1zfQogICAgICogY29sbGVjdGlvbiB3aGVuIHRoZXJlIGlzIG5vdCBlbm91Z2ggc3BhY2UgaW4gdGhlIHRvb2xiYXIgdG8gZGlzcGxheSBhbGwgaXRlbXMgaW4gYSBzaW5nbGUgcm93LgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAcmV0dXJucyB7bW9kdWxlOnVpL2Ryb3Bkb3duL2Ryb3Bkb3dudmlld35Ecm9wZG93blZpZXd9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiX2NyZWF0ZUdyb3VwZWRJdGVtc0Ryb3Bkb3duIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlR3JvdXBlZEl0ZW1zRHJvcGRvd24oKSB7CiAgICAgIHZhciBsb2NhbGUgPSB0aGlzLnZpZXdMb2NhbGU7CiAgICAgIHZhciB0ID0gbG9jYWxlLnQ7CiAgICAgIHZhciBkcm9wZG93biA9IGNyZWF0ZURyb3Bkb3duKGxvY2FsZSk7CiAgICAgIGRyb3Bkb3duLmNsYXNzID0gJ2NrLXRvb2xiYXJfX2dyb3VwZWQtZHJvcGRvd24nOyAvLyBNYWtlIHN1cmUgdGhlIGRyb3Bkb3duIG5ldmVyIHN0aWNrcyBvdXQgdG8gdGhlIGxlZnQvcmlnaHQuIEl0IHNob3VsZCBiZSB1bmRlciB0aGUgbWFpbiB0b29sYmFyLgogICAgICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS9pc3N1ZXMvNTYwOCkKCiAgICAgIGRyb3Bkb3duLnBhbmVsUG9zaXRpb24gPSBsb2NhbGUudWlMYW5ndWFnZURpcmVjdGlvbiA9PT0gJ2x0cicgPyAnc3cnIDogJ3NlJzsKICAgICAgYWRkVG9vbGJhclRvRHJvcGRvd24oZHJvcGRvd24sIFtdKTsKICAgICAgZHJvcGRvd24uYnV0dG9uVmlldy5zZXQoewogICAgICAgIGxhYmVsOiB0KCdTaG93IG1vcmUgaXRlbXMnKSwKICAgICAgICB0b29sdGlwOiB0cnVlLAogICAgICAgIGljb246IHZlcnRpY2FsRG90c0ljb24KICAgICAgfSk7IC8vIDE6MSBwYXNz4oCTdGhyb3VnaCBiaW5kaW5nLgoKICAgICAgZHJvcGRvd24udG9vbGJhclZpZXcuaXRlbXMuYmluZFRvKHRoaXMuZ3JvdXBlZEl0ZW1zKS51c2luZyhmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9KTsKICAgICAgcmV0dXJuIGRyb3Bkb3duOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGVzIHRoZSB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjZm9jdXNhYmxlcyBmb2N1c+KAk2N5Y2xlYWJsZSBpdGVtc30KICAgICAqIGNvbGxlY3Rpb24gc28gaXQgcmVwcmVzZW50cyB0aGUgdXDigJN0b+KAk2RhdGUgc3RhdGUgb2YgdGhlIFVJIGZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIHRoZSB1c2VyLgogICAgICoKICAgICAqIEZvciBpbnN0YW5jZSwgdGhlIHtAbGluayAjZ3JvdXBlZEl0ZW1zRHJvcGRvd259IGNhbiBzaG93IHVwIGFuZCBoaWRlIGJ1dCB3aGVuIGl0IGlzIHZpc2libGUsCiAgICAgKiBpdCBtdXN0IGJlIHN1YmplY3QgdG8gZm9jdXMgY3ljbGluZyBpbiB0aGUgdG9vbGJhci4KICAgICAqCiAgICAgKiBTZWUgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNmb2N1c2FibGVzIGNvbGxlY3Rpb259IGRvY3VtZW50YXRpb24KICAgICAqIHRvIGxlYXJuIG1vcmUgYWJvdXQgdGhlIHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfdXBkYXRlRm9jdXNDeWNsZWFibGVJdGVtcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZUZvY3VzQ3ljbGVhYmxlSXRlbXMoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdGhpcy52aWV3Rm9jdXNhYmxlcy5jbGVhcigpOwogICAgICB0aGlzLnVuZ3JvdXBlZEl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIF90aGlzOC52aWV3Rm9jdXNhYmxlcy5hZGQoaXRlbSk7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuZ3JvdXBlZEl0ZW1zLmxlbmd0aCkgewogICAgICAgIHRoaXMudmlld0ZvY3VzYWJsZXMuYWRkKHRoaXMuZ3JvdXBlZEl0ZW1zRHJvcGRvd24pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX2FyZUl0ZW1zT3ZlcmZsb3dpbmciLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIC8vIEFuIGVtcHR5IHRvb2xiYXIgY2Fubm90IG92ZXJmbG93LgogICAgICBpZiAoIXRoaXMudW5ncm91cGVkSXRlbXMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB2YXIgZWxlbWVudCA9IHRoaXMudmlld0VsZW1lbnQ7CiAgICAgIHZhciB1aUxhbmd1YWdlRGlyZWN0aW9uID0gdGhpcy52aWV3TG9jYWxlLnVpTGFuZ3VhZ2VEaXJlY3Rpb247CiAgICAgIHZhciBsYXN0Q2hpbGRSZWN0ID0gbmV3IFJlY3QoZWxlbWVudC5sYXN0Q2hpbGQpOwogICAgICB2YXIgdG9vbGJhclJlY3QgPSBuZXcgUmVjdChlbGVtZW50KTsKCiAgICAgIGlmICghdGhpcy5jYWNoZWRQYWRkaW5nKSB7CiAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSBnbG9iYWwud2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7CiAgICAgICAgdmFyIHBhZGRpbmdQcm9wZXJ0eSA9IHVpTGFuZ3VhZ2VEaXJlY3Rpb24gPT09ICdsdHInID8gJ3BhZGRpbmdSaWdodCcgOiAncGFkZGluZ0xlZnQnOyAvLyBwYXJzZUludCgpIGlzIGVzc2VudGlhbCBiZWNhdXNlIG9mIHF1aXJreSBmbG9hdGluZyBwb2ludCBudW1iZXJzIGxvZ2ljIGFuZCBET00uCiAgICAgICAgLy8gSWYgdGhlIHBhZGRpbmcgdHVybmVkIG91dCB0b28gYmlnIGJlY2F1c2Ugb2YgdGhhdCwgdGhlIGdyb3VwZWQgaXRlbXMgZHJvcGRvd24gd291bGQKICAgICAgICAvLyBhbHdheXMgbG9vayAoZnJvbSB0aGUgUmVjdCBwZXJzcGVjdGl2ZSkgbGlrZSBpdCBvdmVyZmxvd3MgKHdoaWxlIGl0J3Mgbm90KS4KCiAgICAgICAgdGhpcy5jYWNoZWRQYWRkaW5nID0gTnVtYmVyLnBhcnNlSW50KGNvbXB1dGVkU3R5bGVbcGFkZGluZ1Byb3BlcnR5XSk7CiAgICAgIH0KCiAgICAgIGlmICh1aUxhbmd1YWdlRGlyZWN0aW9uID09PSAnbHRyJykgewogICAgICAgIHJldHVybiBsYXN0Q2hpbGRSZWN0LnJpZ2h0ID4gdG9vbGJhclJlY3QucmlnaHQgLSB0aGlzLmNhY2hlZFBhZGRpbmc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGxhc3RDaGlsZFJlY3QubGVmdCA8IHRvb2xiYXJSZWN0LmxlZnQgKyB0aGlzLmNhY2hlZFBhZGRpbmc7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBEeW5hbWljR3JvdXBpbmc7Cn0oKTsKLyoqCiAqIE9wdGlvbnMgcGFzc2VkIHRvIHRoZSB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjY29uc3RydWN0b3J9IG9mIHRoZSB0b29sYmFyLgogKgogKiBAaW50ZXJmYWNlIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJPcHRpb25zCiAqLwoKLyoqCiAqIFdoZW4gc2V0IHRvIGB0cnVlYCwgdGhlIHRvb2xiYXIgd2lsbCBhdXRvbWF0aWNhbGx5IGdyb3VwIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNpdGVtc30gdGhhdAogKiB3b3VsZCBub3JtYWxseSB3cmFwIHRvIHRoZSBuZXh0IGxpbmUgd2hlbiB0aGVyZSBpcyBub3QgZW5vdWdoIHNwYWNlIHRvIGRpc3BsYXkgdGhlbSBpbiBhIHNpbmdsZSByb3csIGZvcgogKiBpbnN0YW5jZSwgaWYgdGhlIHBhcmVudCBjb250YWluZXIgb2YgdGhlIHRvb2xiYXIgaXMgbmFycm93LgogKgogKiBBbHNvIHNlZToge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I21heFdpZHRofS4KICoKICogQG1lbWJlciB7Qm9vbGVhbn0gbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhck9wdGlvbnMjc2hvdWxkR3JvdXBXaGVuRnVsbAogKi8KCi8qKgogKiBBIGNsYXNzIGludGVyZmFjZSBkZWZpbmluZyB0aGUgYmVoYXZpb3Igb2YgdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlld30uCiAqCiAqIFRvb2xiYXIgYmVoYXZpb3JzIGV4dGVuZCBpdHMgbG9vayBhbmQgZnVuY3Rpb25hbGl0eSBhbmQgaGF2ZSBhbiBpbXBhY3Qgb24gdGhlCiAqIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNlbGVtZW50fSB0ZW1wbGF0ZSBvcgogKiB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjcmVuZGVyIHJlbmRlcmluZ30uIFRoZXkgY2FuIGJlIGVuYWJsZWQKICogY29uZGl0aW9uYWxseSwgZS5nLiBkZXBlbmRpbmcgb24gdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIHRvb2xiYXIuCiAqCiAqIEBwcml2YXRlCiAqIEBpbnRlcmZhY2UgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhckJlaGF2aW9yCiAqLwoKLyoqCiAqIENyZWF0ZXMgYSBuZXcgdG9vbGJhciBiZWhhdmlvciBpbnN0YW5jZS4KICoKICogVGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQgaW4gdGhlIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNjb25zdHJ1Y3Rvcn0gb2YgdGhlIHRvb2xiYXIuCiAqIFRoaXMgaXMgdGhlIHJpZ2h0IHBsYWNlIHRvIGV4dGVuZCB0aGUge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I3RlbXBsYXRlfSBvZgogKiB0aGUgdG9vbGJhciwgZGVmaW5lIGV4dHJhIHRvb2xiYXIgcHJvcGVydGllcywgZXRjLgogKgogKiBAbWV0aG9kICNjb25zdHJ1Y3RvcgogKiBAcGFyYW0ge21vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3fSB2aWV3IEFuIGluc3RhbmNlIG9mIHRoZSB0b29sYmFyIHRoYXQgdGhpcyBiZWhhdmlvciBpcyBhZGRlZCB0by4KICovCgovKioKICogQSBtZXRob2QgY2FsbGVkIGFmdGVyIHRoZSB0b29sYmFyIGhhcyBiZWVuIHtAbGluayBtb2R1bGU6dWkvdG9vbGJhci90b29sYmFydmlld35Ub29sYmFyVmlldyNyZW5kZXIgcmVuZGVyZWR9LgogKiBJdCBjYW4gYmUgdXNlZCB0bywgZm9yIGV4YW1wbGUsIGN1c3RvbWl6ZSB0aGUgYmVoYXZpb3Igb2YgdGhlIHRvb2xiYXIgd2hlbiBpdHMge0BsaW5rIG1vZHVsZTp1aS90b29sYmFyL3Rvb2xiYXJ2aWV3flRvb2xiYXJWaWV3I2VsZW1lbnR9CiAqIGlzIGF2YWlsYWJsZS4KICoKICogQHJlYWRvbmx5CiAqIEBtZW1iZXIge0Z1bmN0aW9ufSAjcmVuZGVyCiAqIEBwYXJhbSB7bW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXd9IHZpZXcgQW4gaW5zdGFuY2Ugb2YgdGhlIHRvb2xiYXIgYmVpbmcgcmVuZGVyZWQuCiAqLwoKLyoqCiAqIEEgbWV0aG9kIGNhbGxlZCBhZnRlciB0aGUgdG9vbGJhciBoYXMgYmVlbiB7QGxpbmsgbW9kdWxlOnVpL3Rvb2xiYXIvdG9vbGJhcnZpZXd+VG9vbGJhclZpZXcjZGVzdHJveSBkZXN0cm95ZWR9LgogKiBJdCBhbGxvd3MgY2xlYW5pbmcgdXAgYWZ0ZXIgdGhlIHRvb2xiYXIgYmVoYXZpb3IsIGZvciBpbnN0YW5jZSwgdGhpcyBpcyB0aGUgcmlnaHQgcGxhY2UgdG8gZGV0YWNoCiAqIGV2ZW50IGxpc3RlbmVycywgZnJlZSB1cCByZWZlcmVuY2VzLCBldGMuCiAqCiAqIEByZWFkb25seQogKiBAbWVtYmVyIHtGdW5jdGlvbn0gI2Rlc3Ryb3kKICov"},{"version":3,"sources":["C:/Users/pc/Desktop/Restoran/Restoran/Restoran.UI/client/node_modules/@ckeditor/ckeditor5-ui/src/toolbar/toolbarview.js"],"names":["View","FocusTracker","FocusCycler","KeystrokeHandler","ToolbarSeparatorView","ResizeObserver","preventDefault","Rect","global","createDropdown","addToolbarToDropdown","attachLinkToDocumentation","verticalDotsIcon","ToolbarView","locale","options","bind","bindTemplate","t","set","items","createCollection","focusTracker","keystrokes","itemsView","ItemsView","children","add","focusables","_focusCycler","keystrokeHandler","actions","focusPrevious","focusNext","setTemplate","tag","attributes","class","to","if","role","style","maxWidth","on","mousedown","_behavior","shouldGroupWhenFull","DynamicGrouping","StaticLayout","item","element","evt","remove","listenTo","render","destroy","focusFirst","focusLast","config","factory","map","name","has","create","console","warn","view","bindTo","using","extendTemplate","viewChildren","viewFocusables","viewItemsView","viewFocusTracker","viewLocale","ungroupedItems","groupedItems","groupedItemsDropdown","_createGroupedItemsDropdown","resizeObserver","cachedPadding","_updateFocusCycleableItems","index","length","_updateGrouping","viewElement","_enableGroupingOnResize","_enableGroupingOnMaxWidthChange","ownerDocument","body","contains","wereItemsGrouped","_areItemsOverflowing","_groupLastItem","_ungroupFirstItem","previousWidth","entry","contentRect","width","last","first","dropdown","panelPosition","uiLanguageDirection","buttonView","label","tooltip","icon","toolbarView","clear","lastChildRect","lastChild","toolbarRect","computedStyle","window","getComputedStyle","paddingProperty","Number","parseInt","right","left"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/toolbar/toolbarview\n */\n\n/* globals console */\n\nimport View from '../view';\nimport FocusTracker from '@ckeditor/ckeditor5-utils/src/focustracker';\nimport FocusCycler from '../focuscycler';\nimport KeystrokeHandler from '@ckeditor/ckeditor5-utils/src/keystrokehandler';\nimport ToolbarSeparatorView from './toolbarseparatorview';\nimport ResizeObserver from '@ckeditor/ckeditor5-utils/src/dom/resizeobserver';\nimport preventDefault from '../bindings/preventdefault.js';\nimport Rect from '@ckeditor/ckeditor5-utils/src/dom/rect';\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport { createDropdown, addToolbarToDropdown } from '../dropdown/utils';\nimport { attachLinkToDocumentation } from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport verticalDotsIcon from '@ckeditor/ckeditor5-core/theme/icons/three-vertical-dots.svg';\n\nimport '../../theme/components/toolbar/toolbar.css';\n\n/**\n * The toolbar view class.\n *\n * @extends module:ui/view~View\n * @implements module:ui/dropdown/dropdownpanelfocusable~DropdownPanelFocusable\n */\nexport default class ToolbarView extends View {\n\t/**\n\t * Creates an instance of the {@link module:ui/toolbar/toolbarview~ToolbarView} class.\n\t *\n\t * Also see {@link #render}.\n\t *\n\t * @param {module:utils/locale~Locale} locale The localization services instance.\n\t * @param {module:ui/toolbar/toolbarview~ToolbarOptions} [options] Configuration options of the toolbar.\n\t */\n\tconstructor( locale, options ) {\n\t\tsuper( locale );\n\n\t\tconst bind = this.bindTemplate;\n\t\tconst t = this.t;\n\n\t\t/**\n\t\t * A reference to the options object passed to the constructor.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ToolbarOptions}\n\t\t */\n\t\tthis.options = options || {};\n\n\t\t/**\n\t\t * Label used by assistive technologies to describe this toolbar element.\n\t\t *\n\t\t * @default 'Editor toolbar'\n\t\t * @member {String} #ariaLabel\n\t\t */\n\t\tthis.set( 'ariaLabel', t( 'Editor toolbar' ) );\n\n\t\t/**\n\t\t * The maximum width of the toolbar element.\n\t\t *\n\t\t * **Note**: When set to a specific value (e.g. `'200px'`), the value will affect the behavior of the\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull}\n\t\t * option by changing the number of {@link #items} that will be displayed in the toolbar at a time.\n\t\t *\n\t\t * @observable\n\t\t * @default 'auto'\n\t\t * @member {String} #maxWidth\n\t\t */\n\t\tthis.set( 'maxWidth', 'auto' );\n\n\t\t/**\n\t\t * A collection of toolbar items (buttons, dropdowns, etc.).\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.items = this.createCollection();\n\n\t\t/**\n\t\t * Tracks information about the DOM focus in the toolbar.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n\t\tthis.focusTracker = new FocusTracker();\n\n\t\t/**\n\t\t * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}\n\t\t * to handle keyboard navigation in the toolbar.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/keystrokehandler~KeystrokeHandler}\n\t\t */\n\t\tthis.keystrokes = new KeystrokeHandler();\n\n\t\t/**\n\t\t * An additional CSS class added to the {@link #element}.\n\t\t *\n\t\t * @observable\n\t\t * @member {String} #class\n\t\t */\n\t\tthis.set( 'class' );\n\n\t\t/**\n\t\t * When set true, makes the toolbar look compact with {@link #element}.\n\t\t *\n\t\t * @observable\n\t\t * @default false\n\t\t * @member {String} #isCompact\n\t\t */\n\t\tthis.set( 'isCompact', false );\n\n\t\t/**\n\t\t * A (child) view containing {@link #items toolbar items}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ItemsView}\n\t\t */\n\t\tthis.itemsView = new ItemsView( locale );\n\n\t\t/**\n\t\t * A toplevel collection aggregating building blocks of the toolbar.\n\t\t *\n\t\t *\t ToolbarView \n\t\t *\t|  #children  |\n\t\t *\t| |    #itemsView    | |\n\t\t *\t| |   | [ item1 ] [ item2 ] ... [ itemN ] |   | |\n\t\t *\t| |   -   | |\n\t\t *\t|  |\n\t\t *\t\n\t\t *\n\t\t * By default, it contains the {@link #itemsView} but it can be extended with additional\n\t\t * UI elements when necessary.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\t\tthis.children.add( this.itemsView );\n\n\t\t/**\n\t\t * A collection of {@link #items} that take part in the focus cycling\n\t\t * (i.e. navigation using the keyboard). Usually, it contains a subset of {@link #items} with\n\t\t * some optional UI elements that also belong to the toolbar and should be focusable\n\t\t * by the user.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.focusables = this.createCollection();\n\n\t\t/**\n\t\t * Controls the orientation of toolbar items. Only available when\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull dynamic items grouping}\n\t\t * is **disabled**.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isVertical\n\t\t */\n\n\t\t/**\n\t\t * Helps cycling over {@link #focusables focusable items} in the toolbar.\n\t\t *\n\t\t * @readonly\n\t\t * @protected\n\t\t * @member {module:ui/focuscycler~FocusCycler}\n\t\t */\n\t\tthis._focusCycler = new FocusCycler( {\n\t\t\tfocusables: this.focusables,\n\t\t\tfocusTracker: this.focusTracker,\n\t\t\tkeystrokeHandler: this.keystrokes,\n\t\t\tactions: {\n\t\t\t\t// Navigate toolbar items backwards using the arrow[left,up] keys.\n\t\t\t\tfocusPrevious: [ 'arrowleft', 'arrowup' ],\n\n\t\t\t\t// Navigate toolbar items forwards using the arrow[right,down] keys.\n\t\t\t\tfocusNext: [ 'arrowright', 'arrowdown' ]\n\t\t\t}\n\t\t} );\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-toolbar',\n\t\t\t\t\tbind.to( 'class' ),\n\t\t\t\t\tbind.if( 'isCompact', 'ck-toolbar_compact' )\n\t\t\t\t],\n\t\t\t\trole: 'toolbar',\n\t\t\t\t'aria-label': bind.to( 'ariaLabel' ),\n\t\t\t\tstyle: {\n\t\t\t\t\tmaxWidth: bind.to( 'maxWidth' )\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tchildren: this.children,\n\n\t\t\ton: {\n\t\t\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/206\n\t\t\t\tmousedown: preventDefault( this )\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * An instance of the active toolbar behavior that shapes its look and functionality.\n\t\t *\n\t\t * See {@link module:ui/toolbar/toolbarview~ToolbarBehavior} to learn more.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ToolbarBehavior}\n\t\t */\n\t\tthis._behavior = this.options.shouldGroupWhenFull ? new DynamicGrouping( this ) : new StaticLayout( this );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {\n\t\tsuper.render();\n\n\t\t// Children added before rendering should be known to the #focusTracker.\n\t\tfor ( const item of this.items ) {\n\t\t\tthis.focusTracker.add( item.element );\n\t\t}\n\n\t\tthis.items.on( 'add', ( evt, item ) => {\n\t\t\tthis.focusTracker.add( item.element );\n\t\t} );\n\n\t\tthis.items.on( 'remove', ( evt, item ) => {\n\t\t\tthis.focusTracker.remove( item.element );\n\t\t} );\n\n\t\t// Start listening for the keystrokes coming from #element.\n\t\tthis.keystrokes.listenTo( this.element );\n\n\t\tthis._behavior.render( this );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tthis._behavior.destroy();\n\n\t\treturn super.destroy();\n\t}\n\n\t/**\n\t * Focuses the first focusable in {@link #focusables}.\n\t */\n\tfocus() {\n\t\tthis._focusCycler.focusFirst();\n\t}\n\n\t/**\n\t * Focuses the last focusable in {@link #focusables}.\n\t */\n\tfocusLast() {\n\t\tthis._focusCycler.focusLast();\n\t}\n\n\t/**\n\t * A utility that expands the plain toolbar configuration into\n\t * {@link module:ui/toolbar/toolbarview~ToolbarView#items} using a given component factory.\n\t *\n\t * @param {Array.<String>} config The toolbar items configuration.\n\t * @param {module:ui/componentfactory~ComponentFactory} factory A factory producing toolbar items.\n\t */\n\tfillFromConfig( config, factory ) {\n\t\tconfig.map( name => {\n\t\t\tif ( name == '|' ) {\n\t\t\t\tthis.items.add( new ToolbarSeparatorView() );\n\t\t\t} else if ( factory.has( name ) ) {\n\t\t\t\tthis.items.add( factory.create( name ) );\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * There was a problem processing the configuration of the toolbar. The item with the given\n\t\t\t\t * name does not exist so it was omitted when rendering the toolbar.\n\t\t\t\t *\n\t\t\t\t * This warning usually shows up when the {@link module:core/plugin~Plugin} which is supposed\n\t\t\t\t * to provide a toolbar item has not been loaded or there is a typo in the configuration.\n\t\t\t\t *\n\t\t\t\t * Make sure the plugin responsible for this toolbar item is loaded and the toolbar configuration\n\t\t\t\t * is correct, e.g. {@link module:basic-styles/bold~Bold} is loaded for the `'bold'` toolbar item.\n\t\t\t\t *\n\t\t\t\t * You can use the following snippet to retrieve all available toolbar items:\n\t\t\t\t *\n\t\t\t\t *\t\tArray.from( editor.ui.componentFactory.names() );\n\t\t\t\t *\n\t\t\t\t * @error toolbarview-item-unavailable\n\t\t\t\t * @param {String} name The name of the component.\n\t\t\t\t */\n\t\t\t\tconsole.warn( attachLinkToDocumentation(\n\t\t\t\t\t'toolbarview-item-unavailable: The requested toolbar item is unavailable.' ), { name } );\n\t\t\t}\n\t\t} );\n\t}\n}\n\n/**\n * An inner block of the {@link module:ui/toolbar/toolbarview~ToolbarView} hosting its\n * {@link module:ui/toolbar/toolbarview~ToolbarView#items}.\n *\n * @private\n * @extends module:ui/view~View\n */\nclass ItemsView extends View {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( locale ) {\n\t\tsuper( locale );\n\n\t\t/**\n\t\t * A collection of items (buttons, dropdowns, etc.).\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.children = this.createCollection();\n\n\t\tthis.setTemplate( {\n\t\t\ttag: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t'ck',\n\t\t\t\t\t'ck-toolbar__items'\n\t\t\t\t]\n\t\t\t},\n\t\t\tchildren: this.children\n\t\t} );\n\t}\n}\n\n/**\n * A toolbar behavior that makes it static and unresponsive to the changes of the environment.\n * At the same time, it also makes it possible to display a toolbar with a vertical layout\n * using the {@link module:ui/toolbar/toolbarview~ToolbarView#isVertical} property.\n *\n * @private\n * @implements module:ui/toolbar/toolbarview~ToolbarBehavior\n */\nclass StaticLayout {\n\t/**\n\t * Creates an instance of the {@link module:ui/toolbar/toolbarview~StaticLayout} toolbar\n\t * behavior.\n\t *\n\t * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior\n\t * is added to.\n\t */\n\tconstructor( view ) {\n\t\tconst bind = view.bindTemplate;\n\n\t\t// Static toolbar can be vertical when needed.\n\t\tview.set( 'isVertical', false );\n\n\t\t// 1:1 passthrough binding, all ToolbarView#items are visible.\n\t\tview.itemsView.children.bindTo( view.items ).using( item => item );\n\n\t\t// 1:1 passthrough binding, all ToolbarView#items are focusable.\n\t\tview.focusables.bindTo( view.items ).using( item => item );\n\n\t\tview.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t// When vertical, the toolbar has an additional CSS class.\n\t\t\t\t\tbind.if( 'isVertical', 'ck-toolbar_vertical' )\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\trender() {}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {}\n}\n\n/**\n * A toolbar behavior that makes the items respond to changes in the geometry.\n *\n * In a nutshell, it groups {@link module:ui/toolbar/toolbarview~ToolbarView#items}\n * that do not fit visually into a single row of the toolbar (due to limited space).\n * Items that do not fit are aggregated in a dropdown displayed at the end of the toolbar.\n *\n *\t ToolbarView \n *\t|  #children  |\n *\t| |    #itemsView    #groupedItemsDropdown    | |\n *\t| |   |       #ungroupedItems     | | ToolbarSeparatorView | |        #groupedItems       |   | |\n *\t| |   -     | |\n *\t| |                                  \\---------- only when toolbar items overflow --------/    | |\n *\t|  |\n *\t\n *\n * @private\n * @implements module:ui/toolbar/toolbarview~ToolbarBehavior\n */\nclass DynamicGrouping {\n\t/**\n\t * Creates an instance of the {@link module:ui/toolbar/toolbarview~DynamicGrouping} toolbar\n\t * behavior.\n\t *\n\t * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior\n\t * is added to.\n\t */\n\tconstructor( view ) {\n\t\t/**\n\t\t * A collection of toolbar children.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.viewChildren = view.children;\n\n\t\t/**\n\t\t * A collection of focusable toolbar elements.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.viewFocusables = view.focusables;\n\n\t\t/**\n\t\t * A view containing toolbar items.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/toolbar/toolbarview~ItemsView}\n\t\t */\n\t\tthis.viewItemsView = view.itemsView;\n\n\t\t/**\n\t\t * Toolbar focus tracker.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/focustracker~FocusTracker}\n\t\t */\n\t\tthis.viewFocusTracker = view.focusTracker;\n\n\t\t/**\n\t\t * Toolbar locale.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/locale~Locale}\n\t\t */\n\t\tthis.viewLocale = view.locale;\n\n\t\t/**\n\t\t * Toolbar element.\n\t\t *\n\t\t * @readonly\n\t\t * @member {HTMLElement} #viewElement\n\t\t */\n\n\t\t/**\n\t\t * A subset of toolbar {@link module:ui/toolbar/toolbarview~ToolbarView#items}.\n\t\t * Aggregates items that fit into a single row of the toolbar and were not {@link #groupedItems grouped}\n\t\t * into a {@link #groupedItemsDropdown dropdown}. Items of this collection are displayed in the\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarView#itemsView}.\n\t\t *\n\t\t * When none of the {@link module:ui/toolbar/toolbarview~ToolbarView#items} were grouped, it\n\t\t * matches the {@link module:ui/toolbar/toolbarview~ToolbarView#items} collection in size and order.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.ungroupedItems = view.createCollection();\n\n\t\t/**\n\t\t * A subset of toolbar {@link module:ui/toolbar/toolbarview~ToolbarView#items}.\n\t\t * A collection of the toolbar items that do not fit into a single row of the toolbar.\n\t\t * Grouped items are displayed in a dedicated {@link #groupedItemsDropdown dropdown}.\n\t\t *\n\t\t * When none of the {@link module:ui/toolbar/toolbarview~ToolbarView#items} were grouped,\n\t\t * this collection is empty.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/viewcollection~ViewCollection}\n\t\t */\n\t\tthis.groupedItems = view.createCollection();\n\n\t\t/**\n\t\t * The dropdown that aggregates {@link #groupedItems grouped items} that do not fit into a single\n\t\t * row of the toolbar. It is displayed on demand as the last of\n\t\t * {@link module:ui/toolbar/toolbarview~ToolbarView#children toolbar children} and offers another\n\t\t * (nested) toolbar which displays items that would normally overflow.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:ui/dropdown/dropdownview~DropdownView}\n\t\t */\n\t\tthis.groupedItemsDropdown = this._createGroupedItemsDropdown();\n\n\t\t/**\n\t\t * An instance of the resize observer that helps dynamically determine the geometry of the toolbar\n\t\t * and manage items that do not fit into a single row.\n\t\t *\n\t\t * **Note:** Created in {@link #_enableGroupingOnResize}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/dom/resizeobserver~ResizeObserver}\n\t\t */\n\t\tthis.resizeObserver = null;\n\n\t\t/**\n\t\t * A cached value of the horizontal padding style used by {@link #_updateGrouping}\n\t\t * to manage the {@link module:ui/toolbar/toolbarview~ToolbarView#items} that do not fit into\n\t\t * a single toolbar line. This value can be reused between updates because it is unlikely that\n\t\t * the padding will change and reusing `Window.getComputedStyle()` is expensive.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t */\n\t\tthis.cachedPadding = null;\n\n\t\t// Only those items that were not grouped are visible to the user.\n\t\tview.itemsView.children.bindTo( this.ungroupedItems ).using( item => item );\n\n\t\t// Make sure all #items visible in the main space of the toolbar are \"focuscycleable\".\n\t\tthis.ungroupedItems.on( 'add', this._updateFocusCycleableItems.bind( this ) );\n\t\tthis.ungroupedItems.on( 'remove', this._updateFocusCycleableItems.bind( this ) );\n\n\t\t// Make sure the #groupedItemsDropdown is also included in cycling when it appears.\n\t\tview.children.on( 'add', this._updateFocusCycleableItems.bind( this ) );\n\t\tview.children.on( 'remove', this._updateFocusCycleableItems.bind( this ) );\n\n\t\t// ToolbarView#items is dynamic. When an item is added, it should be automatically\n\t\t// represented in either grouped or ungrouped items at the right index.\n\t\t// In other words #items == concat( #ungroupedItems, #groupedItems )\n\t\t// (in length and order).\n\t\tview.items.on( 'add', ( evt, item, index ) => {\n\t\t\tif ( index > this.ungroupedItems.length ) {\n\t\t\t\tthis.groupedItems.add( item, index - this.ungroupedItems.length );\n\t\t\t} else {\n\t\t\t\tthis.ungroupedItems.add( item, index );\n\t\t\t}\n\n\t\t\t// When a new ungrouped item joins in and lands in #ungroupedItems, there's a chance it causes\n\t\t\t// the toolbar to overflow.\n\t\t\tthis._updateGrouping();\n\t\t} );\n\n\t\t// When an item is removed from ToolbarView#items, it should be automatically\n\t\t// removed from either grouped or ungrouped items.\n\t\tview.items.on( 'remove', ( evt, item, index ) => {\n\t\t\tif ( index > this.ungroupedItems.length ) {\n\t\t\t\tthis.groupedItems.remove( item );\n\t\t\t} else {\n\t\t\t\tthis.ungroupedItems.remove( item );\n\t\t\t}\n\n\t\t\t// Whether removed from grouped or ungrouped items, there is a chance\n\t\t\t// some new space is available and we could do some ungrouping.\n\t\t\tthis._updateGrouping();\n\t\t} );\n\n\t\tview.extendTemplate( {\n\t\t\tattributes: {\n\t\t\t\tclass: [\n\t\t\t\t\t// To group items dynamically, the toolbar needs a dedicated CSS class.\n\t\t\t\t\t'ck-toolbar_grouping'\n\t\t\t\t]\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Enables dynamic items grouping based on the dimensions of the toolbar.\n\t *\n\t * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior\n\t * is added to.\n\t */\n\trender( view ) {\n\t\tthis.viewElement = view.element;\n\n\t\tthis._enableGroupingOnResize();\n\t\tthis._enableGroupingOnMaxWidthChange( view );\n\t}\n\n\t/**\n\t * Cleans up the internals used by this behavior.\n\t */\n\tdestroy() {\n\t\t// The dropdown may not be in ToolbarView#children at the moment of toolbar destruction\n\t\t// so let's make sure it's actually destroyed along with the toolbar.\n\t\tthis.groupedItemsDropdown.destroy();\n\n\t\tthis.resizeObserver.destroy();\n\t}\n\n\t/**\n\t * When called, it will check if any of the {@link #ungroupedItems} do not fit into a single row of the toolbar,\n\t * and it will move them to the {@link #groupedItems} when it happens.\n\t *\n\t * At the same time, it will also check if there is enough space in the toolbar for the first of the\n\t * {@link #groupedItems} to be returned back to {@link #ungroupedItems} and still fit into a single row\n\t * without the toolbar wrapping.\n\t *\n\t * @protected\n\t */\n\t_updateGrouping() {\n\t\t// Do no groupingrelated geometry analysis when the toolbar is detached from visible DOM,\n\t\t// for instance before #render(), or after render but without a parent or a parent detached\n\t\t// from DOM. DOMRects won't work anyway and there will be tons of warning in the console and\n\t\t// nothing else.\n\t\tif ( !this.viewElement.ownerDocument.body.contains( this.viewElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet wereItemsGrouped;\n\n\t\t// Group #items as long as some wrap to the next row. This will happen, for instance,\n\t\t// when the toolbar is getting narrow and there is not enough space to display all items in\n\t\t// a single row.\n\t\twhile ( this._areItemsOverflowing ) {\n\t\t\tthis._groupLastItem();\n\n\t\t\twereItemsGrouped = true;\n\t\t}\n\n\t\t// If none were grouped now but there were some items already grouped before,\n\t\t// then, what the hell, maybe let's see if some of them can be ungrouped. This happens when,\n\t\t// for instance, the toolbar is stretching and there's more space in it than before.\n\t\tif ( !wereItemsGrouped && this.groupedItems.length ) {\n\t\t\t// Ungroup items as long as none are overflowing or there are none to ungroup left.\n\t\t\twhile ( this.groupedItems.length && !this._areItemsOverflowing ) {\n\t\t\t\tthis._ungroupFirstItem();\n\t\t\t}\n\n\t\t\t// If the ungrouping ended up with some item wrapping to the next row,\n\t\t\t// put it back to the group toolbar (\"undo the last ungroup\"). We don't know whether\n\t\t\t// an item will wrap or not until we ungroup it (that's a DOM/CSS thing) so this\n\t\t\t// cleanup is vital for the algorithm.\n\t\t\tif ( this._areItemsOverflowing ) {\n\t\t\t\tthis._groupLastItem();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` when {@link module:ui/toolbar/toolbarview~ToolbarView#element} children visually overflow,\n\t * for instance if the toolbar is narrower than its members. Returns `false` otherwise.\n\t *\n\t * @private\n\t * @type {Boolean}\n\t */\n\tget _areItemsOverflowing() {\n\t\t// An empty toolbar cannot overflow.\n\t\tif ( !this.ungroupedItems.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst element = this.viewElement;\n\t\tconst uiLanguageDirection = this.viewLocale.uiLanguageDirection;\n\t\tconst lastChildRect = new Rect( element.lastChild );\n\t\tconst toolbarRect = new Rect( element );\n\n\t\tif ( !this.cachedPadding ) {\n\t\t\tconst computedStyle = global.window.getComputedStyle( element );\n\t\t\tconst paddingProperty = uiLanguageDirection === 'ltr' ? 'paddingRight' : 'paddingLeft';\n\n\t\t\t// parseInt() is essential because of quirky floating point numbers logic and DOM.\n\t\t\t// If the padding turned out too big because of that, the grouped items dropdown would\n\t\t\t// always look (from the Rect perspective) like it overflows (while it's not).\n\t\t\tthis.cachedPadding = Number.parseInt( computedStyle[ paddingProperty ] );\n\t\t}\n\n\t\tif ( uiLanguageDirection === 'ltr' ) {\n\t\t\treturn lastChildRect.right > toolbarRect.right - this.cachedPadding;\n\t\t} else {\n\t\t\treturn lastChildRect.left < toolbarRect.left + this.cachedPadding;\n\t\t}\n\t}\n\n\t/**\n\t * Enables the functionality that prevents {@link #ungroupedItems} from overflowing (wrapping to the next row)\n\t * upon resize when there is little space available. Instead, the toolbar items are moved to the\n\t * {@link #groupedItems} collection and displayed in a dropdown at the end of the row (which has its own nested toolbar).\n\t *\n\t * When called, the toolbar will automatically analyze the location of its {@link #ungroupedItems} and \"group\"\n\t * them in the dropdown if necessary. It will also observe the browser window for size changes in\n\t * the future and respond to them by grouping more items or reverting already grouped back, depending\n\t * on the visual space available.\n\t *\n\t * @private\n\t */\n\t_enableGroupingOnResize() {\n\t\tlet previousWidth;\n\n\t\t// TODO: Consider debounce.\n\t\tthis.resizeObserver = new ResizeObserver( this.viewElement, entry => {\n\t\t\tif ( !previousWidth || previousWidth !== entry.contentRect.width ) {\n\t\t\t\tthis._updateGrouping();\n\n\t\t\t\tpreviousWidth = entry.contentRect.width;\n\t\t\t}\n\t\t} );\n\n\t\tthis._updateGrouping();\n\t}\n\n\t/**\n\t * Enables the grouping functionality, just like {@link #_enableGroupingOnResize} but the difference is that\n\t * it listens to the changes of {@link module:ui/toolbar/toolbarview~ToolbarView#maxWidth} instead.\n\t *\n\t * @private\n\t */\n\t_enableGroupingOnMaxWidthChange( view ) {\n\t\tview.on( 'change:maxWidth', () => {\n\t\t\tthis._updateGrouping();\n\t\t} );\n\t}\n\n\t/**\n\t * When called, it will remove the last item from {@link #ungroupedItems} and move it back\n\t * to the {@link #groupedItems} collection.\n\t *\n\t * The opposite of {@link #_ungroupFirstItem}.\n\t *\n\t * @private\n\t */\n\t_groupLastItem() {\n\t\tif ( !this.groupedItems.length ) {\n\t\t\tthis.viewChildren.add( new ToolbarSeparatorView() );\n\t\t\tthis.viewChildren.add( this.groupedItemsDropdown );\n\t\t\tthis.viewFocusTracker.add( this.groupedItemsDropdown.element );\n\t\t}\n\n\t\tthis.groupedItems.add( this.ungroupedItems.remove( this.ungroupedItems.last ), 0 );\n\t}\n\n\t/**\n\t * Moves the very first item belonging to {@link #groupedItems} back\n\t * to the {@link #ungroupedItems} collection.\n\t *\n\t * The opposite of {@link #_groupLastItem}.\n\t *\n\t * @private\n\t */\n\t_ungroupFirstItem() {\n\t\tthis.ungroupedItems.add( this.groupedItems.remove( this.groupedItems.first ) );\n\n\t\tif ( !this.groupedItems.length ) {\n\t\t\tthis.viewChildren.remove( this.groupedItemsDropdown );\n\t\t\tthis.viewChildren.remove( this.viewChildren.last );\n\t\t\tthis.viewFocusTracker.remove( this.groupedItemsDropdown.element );\n\t\t}\n\t}\n\n\t/**\n\t * Creates the {@link #groupedItemsDropdown} that hosts the members of the {@link #groupedItems}\n\t * collection when there is not enough space in the toolbar to display all items in a single row.\n\t *\n\t * @private\n\t * @returns {module:ui/dropdown/dropdownview~DropdownView}\n\t */\n\t_createGroupedItemsDropdown() {\n\t\tconst locale = this.viewLocale;\n\t\tconst t = locale.t;\n\t\tconst dropdown = createDropdown( locale );\n\n\t\tdropdown.class = 'ck-toolbar__grouped-dropdown';\n\n\t\t// Make sure the dropdown never sticks out to the left/right. It should be under the main toolbar.\n\t\t// (https://github.com/ckeditor/ckeditor5/issues/5608)\n\t\tdropdown.panelPosition = locale.uiLanguageDirection === 'ltr' ? 'sw' : 'se';\n\n\t\taddToolbarToDropdown( dropdown, [] );\n\n\t\tdropdown.buttonView.set( {\n\t\t\tlabel: t( 'Show more items' ),\n\t\t\ttooltip: true,\n\t\t\ticon: verticalDotsIcon\n\t\t} );\n\n\t\t// 1:1 passthrough binding.\n\t\tdropdown.toolbarView.items.bindTo( this.groupedItems ).using( item => item );\n\n\t\treturn dropdown;\n\t}\n\n\t/**\n\t * Updates the {@link module:ui/toolbar/toolbarview~ToolbarView#focusables focuscycleable items}\n\t * collection so it represents the uptodate state of the UI from the perspective of the user.\n\t *\n\t * For instance, the {@link #groupedItemsDropdown} can show up and hide but when it is visible,\n\t * it must be subject to focus cycling in the toolbar.\n\t *\n\t * See the {@link module:ui/toolbar/toolbarview~ToolbarView#focusables collection} documentation\n\t * to learn more about the purpose of this method.\n\t *\n\t * @private\n\t */\n\t_updateFocusCycleableItems() {\n\t\tthis.viewFocusables.clear();\n\n\t\tthis.ungroupedItems.map( item => {\n\t\t\tthis.viewFocusables.add( item );\n\t\t} );\n\n\t\tif ( this.groupedItems.length ) {\n\t\t\tthis.viewFocusables.add( this.groupedItemsDropdown );\n\t\t}\n\t}\n}\n\n/**\n * Options passed to the {@link module:ui/toolbar/toolbarview~ToolbarView#constructor} of the toolbar.\n *\n * @interface module:ui/toolbar/toolbarview~ToolbarOptions\n */\n\n/**\n * When set to `true`, the toolbar will automatically group {@link module:ui/toolbar/toolbarview~ToolbarView#items} that\n * would normally wrap to the next line when there is not enough space to display them in a single row, for\n * instance, if the parent container of the toolbar is narrow.\n *\n * Also see: {@link module:ui/toolbar/toolbarview~ToolbarView#maxWidth}.\n *\n * @member {Boolean} module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull\n */\n\n/**\n * A class interface defining the behavior of the {@link module:ui/toolbar/toolbarview~ToolbarView}.\n *\n * Toolbar behaviors extend its look and functionality and have an impact on the\n * {@link module:ui/toolbar/toolbarview~ToolbarView#element} template or\n * {@link module:ui/toolbar/toolbarview~ToolbarView#render rendering}. They can be enabled\n * conditionally, e.g. depending on the configuration of the toolbar.\n *\n * @private\n * @interface module:ui/toolbar/toolbarview~ToolbarBehavior\n */\n\n/**\n * Creates a new toolbar behavior instance.\n *\n * The instance is created in the {@link module:ui/toolbar/toolbarview~ToolbarView#constructor} of the toolbar.\n * This is the right place to extend the {@link module:ui/toolbar/toolbarview~ToolbarView#template} of\n * the toolbar, define extra toolbar properties, etc.\n *\n * @method #constructor\n * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar that this behavior is added to.\n */\n\n/**\n * A method called after the toolbar has been {@link module:ui/toolbar/toolbarview~ToolbarView#render rendered}.\n * It can be used to, for example, customize the behavior of the toolbar when its {@link module:ui/toolbar/toolbarview~ToolbarView#element}\n * is available.\n *\n * @readonly\n * @member {Function} #render\n * @param {module:ui/toolbar/toolbarview~ToolbarView} view An instance of the toolbar being rendered.\n */\n\n/**\n * A method called after the toolbar has been {@link module:ui/toolbar/toolbarview~ToolbarView#destroy destroyed}.\n * It allows cleaning up after the toolbar behavior, for instance, this is the right place to detach\n * event listeners, free up references, etc.\n *\n * @readonly\n * @member {Function} #destroy\n */\n"]}]}