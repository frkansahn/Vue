{"remainingRequest":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-typing\\src\\utils\\injectunsafekeystrokeshandling.js","dependencies":[{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-typing\\src\\utils\\injectunsafekeystrokeshandling.js","mtime":499162500000},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-dev-webpack-plugin\\lib\\translatesourceloader.js","mtime":499162500000},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1581760768702},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1581760786382},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1581760768279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwoKLyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDIwLCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIHR5cGluZy91dGlscy9pbmplY3R1bnNhZmVrZXlzdHJva2VzaGFuZGxpbmcKICovCmltcG9ydCB7IGdldENvZGUgfSBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9rZXlib2FyZCc7CmltcG9ydCBlbnYgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvZW52JzsKLyoqCiAqIEhhbmRsZXMga2V5c3Ryb2tlcyB3aGljaCBhcmUgdW5zYWZlIGZvciB0eXBpbmcuIFRoaXMgaGFuZGxlcidzIGxvZ2ljIGlzIGV4cGxhaW5lZAogKiBpbiBodHRwczovL2dpdGh1Yi5jb20vY2tlZGl0b3IvY2tlZGl0b3I1LXR5cGluZy9pc3N1ZXMvODMjaXNzdWVjb21tZW50LTM5ODY5MDI1MS4KICoKICogQHBhcmFtIHttb2R1bGU6Y29yZS9lZGl0b3IvZWRpdG9yfkVkaXRvcn0gZWRpdG9yIFRoZSBlZGl0b3IgaW5zdGFuY2UuCiAqLwoKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5qZWN0VW5zYWZlS2V5c3Ryb2tlc0hhbmRsaW5nKGVkaXRvcikgewogIHZhciBsYXRlc3RDb21wb3NpdGlvblNlbGVjdGlvbiA9IG51bGw7CiAgdmFyIG1vZGVsID0gZWRpdG9yLm1vZGVsOwogIHZhciB2aWV3ID0gZWRpdG9yLmVkaXRpbmcudmlldzsKICB2YXIgaW5wdXRDb21tYW5kID0gZWRpdG9yLmNvbW1hbmRzLmdldCgnaW5wdXQnKTsgLy8gRm9yIEFuZHJvaWQsIHdlIHdhbnQgdG8gaGFuZGxlIGtleXN0cm9rZXMgb24gYGJlZm9yZWlucHV0YCB0byBiZSBzdXJlIHRoYXQgY29kZSBpbiBgRGVsZXRlT2JzZXJ2ZXJgIGFscmVhZHkgaGFkIGEgY2hhbmNlIHRvIGJlIGZpcmVkLgoKICBpZiAoZW52LmlzQW5kcm9pZCkgewogICAgdmlldy5kb2N1bWVudC5vbignYmVmb3JlaW5wdXQnLCBmdW5jdGlvbiAoZXZ0LCBldnREYXRhKSB7CiAgICAgIHJldHVybiBoYW5kbGVVbnNhZmVLZXlzdHJva2UoZXZ0RGF0YSk7CiAgICB9LCB7CiAgICAgIHByaW9yaXR5OiAnbG93ZXN0JwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHZpZXcuZG9jdW1lbnQub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0LCBldnREYXRhKSB7CiAgICAgIHJldHVybiBoYW5kbGVVbnNhZmVLZXlzdHJva2UoZXZ0RGF0YSk7CiAgICB9LCB7CiAgICAgIHByaW9yaXR5OiAnbG93ZXN0JwogICAgfSk7CiAgfQoKICB2aWV3LmRvY3VtZW50Lm9uKCdjb21wb3NpdGlvbnN0YXJ0JywgaGFuZGxlQ29tcG9zaXRpb25TdGFydCwgewogICAgcHJpb3JpdHk6ICdsb3dlc3QnCiAgfSk7CiAgdmlldy5kb2N1bWVudC5vbignY29tcG9zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7CiAgICBsYXRlc3RDb21wb3NpdGlvblNlbGVjdGlvbiA9IG1vZGVsLmNyZWF0ZVNlbGVjdGlvbihtb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24pOwogIH0sIHsKICAgIHByaW9yaXR5OiAnbG93ZXN0JwogIH0pOyAvLyBIYW5kbGVzIHRoZSBrZXlkb3duIGV2ZW50LiBXZSBuZWVkIHRvIGd1ZXNzIHdoZXRoZXIgc3VjaCBrZXlzdHJva2UgaXMgZ29pbmcgdG8gcmVzdWx0CiAgLy8gaW4gdHlwaW5nLiBJZiBzbywgdGhlbiBiZWZvcmUgY2hhcmFjdGVyIGluc2VydGlvbiBoYXBwZW5zLCBhbnkgc2VsZWN0ZWQgY29udGVudCBuZWVkcwogIC8vIHRvIGJlIGRlbGV0ZWQuIE90aGVyd2lzZSB0aGUgZGVmYXVsdCBicm93c2VyIGRlbGV0aW9uIG1lY2hhbmlzbSB3b3VsZCBiZQogIC8vIHRyaWdnZXJlZCwgcmVzdWx0aW5nIGluOgogIC8vCiAgLy8gKiBIdW5kcmVkcyBvZiBtdXRhdGlvbnMgd2hpY2ggY291bGQgbm90IGJlIGhhbmRsZWQuCiAgLy8gKiBCdXQgbW9zdCBpbXBvcnRhbnRseSwgbG9zcyBvZiBjb250cm9sIG92ZXIgaG93IHRoZSBjb250ZW50IGlzIGJlaW5nIGRlbGV0ZWQuCiAgLy8KICAvLyBUaGUgbWV0aG9kIGlzIHVzZWQgaW4gYSBsb3ctcHJpb3JpdHkgbGlzdGVuZXIsIGhlbmNlIGFsbG93aW5nIG90aGVyIGxpc3RlbmVycyAoZS5nLiBkZWxldGUgb3IgZW50ZXIgZmVhdHVyZXMpCiAgLy8gdG8gaGFuZGxlIHRoZSBldmVudC4KICAvLwogIC8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL2tleW9ic2VydmVyfktleUV2ZW50RGF0YX0gZXZ0RGF0YQoKICBmdW5jdGlvbiBoYW5kbGVVbnNhZmVLZXlzdHJva2UoZXZ0RGF0YSkgewogICAgdmFyIGRvYyA9IG1vZGVsLmRvY3VtZW50OwogICAgdmFyIGlzQ29tcG9zaW5nID0gdmlldy5kb2N1bWVudC5pc0NvbXBvc2luZzsKICAgIHZhciBpc1NlbGVjdGlvblVuY2hhbmdlZCA9IGxhdGVzdENvbXBvc2l0aW9uU2VsZWN0aW9uICYmIGxhdGVzdENvbXBvc2l0aW9uU2VsZWN0aW9uLmlzRXF1YWwoZG9jLnNlbGVjdGlvbik7IC8vIFJlc2V0IHN0b3JlZCBjb21wb3NpdGlvbiBzZWxlY3Rpb24uCgogICAgbGF0ZXN0Q29tcG9zaXRpb25TZWxlY3Rpb24gPSBudWxsOyAvLyBCeSByZWx5aW5nIG9uIHRoZSBzdGF0ZSBvZiB0aGUgaW5wdXQgY29tbWFuZCB3ZSBhbGxvdyBkaXNhYmxpbmcgdGhlIGVudGlyZSBpbnB1dCBlYXNpbHkKICAgIC8vIGJ5IGp1c3QgZGlzYWJsaW5nIHRoZSBpbnB1dCBjb21tYW5kLiBXZSBjb3VsZOKAmXZlIHVzZWQgaGVyZSB0aGUgZGVsZXRlIGNvbW1hbmQgYnV0IHRoYXQKICAgIC8vIHdvdWxkIG1lYW4gcmVxdWlyaW5nIHRoZSBkZWxldGUgZmVhdHVyZSB3aGljaCB3b3VsZCBibG9jayBsb2FkaW5nIG9uZSB3aXRob3V0IHRoZSBvdGhlci4KICAgIC8vIFdlIGNvdWxkIGFsc28gY2hlY2sgdGhlIGVkaXRvci5pc1JlYWRPbmx5IHByb3BlcnR5LCBidXQgdGhhdCB3b3VsZG4ndCBhbGxvdyB0byBibG9jawogICAgLy8gdGhlIGlucHV0IHdpdGhvdXQgYmxvY2tpbmcgb3RoZXIgZmVhdHVyZXMuCgogICAgaWYgKCFpbnB1dENvbW1hbmQuaXNFbmFibGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoaXNTYWZlS2V5c3Ryb2tlKGV2dERhdGEpIHx8IGRvYy5zZWxlY3Rpb24uaXNDb2xsYXBzZWQpIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBJZiBkdXJpbmcgY29tcG9zaXRpb24sIGRlbGV0aW9uIHNob3VsZCBiZSBwcmV2ZW50ZWQgYXMgaXQgbWF5IHJlbW92ZSBjb21wb3NlZCBzZXF1ZW5jZSAoIzgzKS4KCgogICAgaWYgKGlzQ29tcG9zaW5nICYmIGV2dERhdGEua2V5Q29kZSA9PT0gMjI5KSB7CiAgICAgIHJldHVybjsKICAgIH0gLy8gSWYgdGhlcmUgaXMgYSBga2V5ZG93bmAgZXZlbnQgZmlyZWQgd2l0aCAnMjI5JyBrZXljb2RlIGl0IG1pZ2h0IGJlIHJlbGF0ZWQKICAgIC8vIHRvIHJlY2VudCBjb21wb3NpdGlvbi4gQ2hlY2sgaWYgc2VsZWN0aW9uIGlzIHRoZSBzYW1lIGFzIHVwb24gZW5kaW5nIHJlY2VudCBjb21wb3NpdGlvbiwKICAgIC8vIGlmIHNvIGRvIG5vdCByZW1vdmUgc2VsZWN0ZWQgY29udGVudCBhcyBpdCB3aWxsIHJlbW92ZSBjb21wb3NlZCBzZXF1ZW5jZSAoIzgzKS4KCgogICAgaWYgKCFpc0NvbXBvc2luZyAmJiBldnREYXRhLmtleUNvZGUgPT09IDIyOSAmJiBpc1NlbGVjdGlvblVuY2hhbmdlZCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgZGVsZXRlU2VsZWN0aW9uQ29udGVudCgpOwogIH0gLy8gSGFuZGxlcyB0aGUgYGNvbXBvc2l0aW9uc3RhcnRgIGV2ZW50LiBJdCBpcyB1c2VkIG9ubHkgaW4gc3BlY2lhbCBjYXNlcyB0byByZW1vdmUgdGhlIGNvbnRlbnRzCiAgLy8gb2YgYSBub24tY29sbGFwc2VkIHNlbGVjdGlvbiBzbyBjb21wb3NpdGlvbiBpdHNlbGYgZG9lcyBub3QgcmVzdWx0IGluIGNvbXBsZXggbXV0YXRpb25zLgogIC8vCiAgLy8gVGhlIHNwZWNpYWwgY2FzZSBtZW50aW9uZWQgYWJvdmUgaXMgYSBzaXR1YXRpb24gaW4gd2hpY2ggdGhlIGBrZXlkb3duYCBldmVudCBpcyBmaXJlZCBhZnRlcgogIC8vIGBjb21wb3NpdGlvbnN0YXJ0YCBldmVudC4gSW4gc3VjaCBjYXNlcyB7QGxpbmsgI2hhbmRsZUtleWRvd259IGNhbm5vdCBjbGVhciBjdXJyZW50IHNlbGVjdGlvbgogIC8vIGNvbnRlbnRzIChiZWNhdXNlIGl0IGlzIHRvbyBsYXRlIGFuZCB3aWxsIGJyZWFrIHRoZSBjb21wb3NpdGlvbikgc28gdGhlIGNvbXBvc2l0aW9uIGhhbmRsZXIgdGFrZXMgY2FyZSBvZiBpdC4KCgogIGZ1bmN0aW9uIGhhbmRsZUNvbXBvc2l0aW9uU3RhcnQoKSB7CiAgICB2YXIgZG9jID0gbW9kZWwuZG9jdW1lbnQ7CiAgICB2YXIgaXNGbGF0U2VsZWN0aW9uID0gZG9jLnNlbGVjdGlvbi5yYW5nZUNvdW50ID09PSAxID8gZG9jLnNlbGVjdGlvbi5nZXRGaXJzdFJhbmdlKCkuaXNGbGF0IDogdHJ1ZTsgLy8gSWYgb24gYGNvbXBvc2l0aW9uc3RhcnRgIHRoZXJlIGlzIGEgbm9uLWNvbGxhcHNlZCBzZWxlY3Rpb24gd2hpY2ggc3RhcnQgYW5kIGVuZCBoYXZlIGRpZmZlcmVudCBwYXJlbnRzCiAgICAvLyBpdCBtZWFucyB0aGUgYGhhbmRsZUtleWRvd24oKWAgbWV0aG9kIGRpZCBub3QgcmVtb3ZlIGl0cyBjb250ZW50cy4gSXQgaGFwcGVucyB1c3VhbGx5IGJlY2F1c2UKICAgIC8vIG9mIGRpZmZlcmVudCBvcmRlciBvZiBldmVudHMgKGBjb21wb3NpdGlvbnN0YXJ0YCBiZWZvcmUgYGtleWRvd25gIC0gaW4gU2FmYXJpKS4gSW4gc3VjaCBjYXNlcwogICAgLy8gd2UgbmVlZCB0byByZW1vdmUgc2VsZWN0aW9uIGNvbnRlbnRzIG9uIGNvbXBvc2l0aW9uIHN0YXJ0ICgjODMpLgoKICAgIGlmIChkb2Muc2VsZWN0aW9uLmlzQ29sbGFwc2VkIHx8IGlzRmxhdFNlbGVjdGlvbikgewogICAgICByZXR1cm47CiAgICB9CgogICAgZGVsZXRlU2VsZWN0aW9uQ29udGVudCgpOwogIH0KCiAgZnVuY3Rpb24gZGVsZXRlU2VsZWN0aW9uQ29udGVudCgpIHsKICAgIHZhciBidWZmZXIgPSBpbnB1dENvbW1hbmQuYnVmZmVyOwogICAgYnVmZmVyLmxvY2soKTsKICAgIG1vZGVsLmVucXVldWVDaGFuZ2UoYnVmZmVyLmJhdGNoLCBmdW5jdGlvbiAoKSB7CiAgICAgIG1vZGVsLmRlbGV0ZUNvbnRlbnQobW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uKTsKICAgIH0pOwogICAgYnVmZmVyLnVubG9jaygpOwogIH0KfQp2YXIgc2FmZUtleWNvZGVzID0gW2dldENvZGUoJ2Fycm93VXAnKSwgZ2V0Q29kZSgnYXJyb3dSaWdodCcpLCBnZXRDb2RlKCdhcnJvd0Rvd24nKSwgZ2V0Q29kZSgnYXJyb3dMZWZ0JyksIDksIC8vIFRhYgoxNiwgLy8gU2hpZnQKMTcsIC8vIEN0cmwKMTgsIC8vIEFsdAoxOSwgLy8gUGF1c2UKMjAsIC8vIENhcHNMb2NrCjI3LCAvLyBFc2NhcGUKMzMsIC8vIFBhZ2VVcAozNCwgLy8gUGFnZURvd24KMzUsIC8vIEhvbWUKMzYsIC8vIEVuZCwKNDUsIC8vIEluc2VydCwKOTEsIC8vIFdpbmRvd3MsCjkzLCAvLyBNZW51IGtleSwKMTQ0LCAvLyBOdW1Mb2NrCjE0NSwgLy8gU2Nyb2xsTG9jaywKMTczLCAvLyBNdXRlL1VubXV0ZQoxNzQsIC8vIFZvbHVtZSB1cAoxNzUsIC8vIFZvbHVtZSBkb3duLAoxNzYsIC8vIE5leHQgc29uZywKMTc3LCAvLyBQcmV2aW91cyBzb25nLAoxNzgsIC8vIFN0b3AsCjE3OSwgLy8gUGxheS9QYXVzZSwKMjU1IC8vIERpc3BsYXkgYnJpZ2h0bmVzcyAoaW5jcmVhc2UgYW5kIGRlY3JlYXNlKQpdOyAvLyBGdW5jdGlvbiBrZXlzLgoKZm9yICh2YXIgY29kZSA9IDExMjsgY29kZSA8PSAxMzU7IGNvZGUrKykgewogIHNhZmVLZXljb2Rlcy5wdXNoKGNvZGUpOwp9IC8vIFJldHVybnMgYHRydWVgIGlmIGEga2V5c3Ryb2tlIHNob3VsZCBub3QgY2F1c2UgYW55IGNvbnRlbnQgY2hhbmdlIGNhdXNlZCBieSAidHlwaW5nIi4KLy8KLy8gTm90ZTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyB2ZXJ5IHNpbXBsZSBhbmQgd2lsbCBuZWVkIHRvIGJlIHJlZmluZWQgd2l0aCB0aW1lLgovLwovLyBAcHJpdmF0ZQovLyBAcGFyYW0ge2VuZ2luZS52aWV3Lm9ic2VydmVyLmtleU9ic2VydmVyLktleUV2ZW50RGF0YX0ga2V5RGF0YQovLyBAcmV0dXJucyB7Qm9vbGVhbn0KCgpmdW5jdGlvbiBpc1NhZmVLZXlzdHJva2Uoa2V5RGF0YSkgewogIC8vIEtleXN0cm9rZXMgd2hpY2ggY29udGFpbiBDdHJsIGRvbid0IHJlcHJlc2VudCB0eXBpbmcuCiAgaWYgKGtleURhdGEuY3RybEtleSkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICByZXR1cm4gc2FmZUtleWNvZGVzLmluY2x1ZGVzKGtleURhdGEua2V5Q29kZSk7Cn0="},{"version":3,"sources":["C:/Users/pc/Desktop/Restoran/Restoran/Restoran.UI/client/node_modules/@ckeditor/ckeditor5-typing/src/utils/injectunsafekeystrokeshandling.js"],"names":["getCode","env","injectUnsafeKeystrokesHandling","editor","latestCompositionSelection","model","view","editing","inputCommand","commands","get","isAndroid","document","on","evt","evtData","handleUnsafeKeystroke","priority","handleCompositionStart","createSelection","selection","doc","isComposing","isSelectionUnchanged","isEqual","isEnabled","isSafeKeystroke","isCollapsed","keyCode","deleteSelectionContent","isFlatSelection","rangeCount","getFirstRange","isFlat","buffer","lock","enqueueChange","batch","deleteContent","unlock","safeKeycodes","code","push","keyData","ctrlKey","includes"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/utils/injectunsafekeystrokeshandling\n */\n\nimport { getCode } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * Handles keystrokes which are unsafe for typing. This handler's logic is explained\n * in https://github.com/ckeditor/ckeditor5-typing/issues/83#issuecomment-398690251.\n *\n * @param {module:core/editor/editor~Editor} editor The editor instance.\n */\nexport default function injectUnsafeKeystrokesHandling( editor ) {\n\tlet latestCompositionSelection = null;\n\n\tconst model = editor.model;\n\tconst view = editor.editing.view;\n\tconst inputCommand = editor.commands.get( 'input' );\n\n\t// For Android, we want to handle keystrokes on `beforeinput` to be sure that code in `DeleteObserver` already had a chance to be fired.\n\tif ( env.isAndroid ) {\n\t\tview.document.on( 'beforeinput', ( evt, evtData ) => handleUnsafeKeystroke( evtData ), { priority: 'lowest' } );\n\t} else {\n\t\tview.document.on( 'keydown', ( evt, evtData ) => handleUnsafeKeystroke( evtData ), { priority: 'lowest' } );\n\t}\n\n\tview.document.on( 'compositionstart', handleCompositionStart, { priority: 'lowest' } );\n\n\tview.document.on( 'compositionend', () => {\n\t\tlatestCompositionSelection = model.createSelection( model.document.selection );\n\t}, { priority: 'lowest' } );\n\n\t// Handles the keydown event. We need to guess whether such keystroke is going to result\n\t// in typing. If so, then before character insertion happens, any selected content needs\n\t// to be deleted. Otherwise the default browser deletion mechanism would be\n\t// triggered, resulting in:\n\t//\n\t// * Hundreds of mutations which could not be handled.\n\t// * But most importantly, loss of control over how the content is being deleted.\n\t//\n\t// The method is used in a low-priority listener, hence allowing other listeners (e.g. delete or enter features)\n\t// to handle the event.\n\t//\n\t// @param {module:engine/view/observer/keyobserver~KeyEventData} evtData\n\tfunction handleUnsafeKeystroke( evtData ) {\n\t\tconst doc = model.document;\n\t\tconst isComposing = view.document.isComposing;\n\t\tconst isSelectionUnchanged = latestCompositionSelection && latestCompositionSelection.isEqual( doc.selection );\n\n\t\t// Reset stored composition selection.\n\t\tlatestCompositionSelection = null;\n\n\t\t// By relying on the state of the input command we allow disabling the entire input easily\n\t\t// by just disabling the input command. We could’ve used here the delete command but that\n\t\t// would mean requiring the delete feature which would block loading one without the other.\n\t\t// We could also check the editor.isReadOnly property, but that wouldn't allow to block\n\t\t// the input without blocking other features.\n\t\tif ( !inputCommand.isEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isSafeKeystroke( evtData ) || doc.selection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If during composition, deletion should be prevented as it may remove composed sequence (#83).\n\t\tif ( isComposing && evtData.keyCode === 229 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there is a `keydown` event fired with '229' keycode it might be related\n\t\t// to recent composition. Check if selection is the same as upon ending recent composition,\n\t\t// if so do not remove selected content as it will remove composed sequence (#83).\n\t\tif ( !isComposing && evtData.keyCode === 229 && isSelectionUnchanged ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdeleteSelectionContent();\n\t}\n\n\t// Handles the `compositionstart` event. It is used only in special cases to remove the contents\n\t// of a non-collapsed selection so composition itself does not result in complex mutations.\n\t//\n\t// The special case mentioned above is a situation in which the `keydown` event is fired after\n\t// `compositionstart` event. In such cases {@link #handleKeydown} cannot clear current selection\n\t// contents (because it is too late and will break the composition) so the composition handler takes care of it.\n\tfunction handleCompositionStart() {\n\t\tconst doc = model.document;\n\t\tconst isFlatSelection = doc.selection.rangeCount === 1 ? doc.selection.getFirstRange().isFlat : true;\n\n\t\t// If on `compositionstart` there is a non-collapsed selection which start and end have different parents\n\t\t// it means the `handleKeydown()` method did not remove its contents. It happens usually because\n\t\t// of different order of events (`compositionstart` before `keydown` - in Safari). In such cases\n\t\t// we need to remove selection contents on composition start (#83).\n\t\tif ( doc.selection.isCollapsed || isFlatSelection ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdeleteSelectionContent();\n\t}\n\n\tfunction deleteSelectionContent() {\n\t\tconst buffer = inputCommand.buffer;\n\n\t\tbuffer.lock();\n\n\t\tmodel.enqueueChange( buffer.batch, () => {\n\t\t\tmodel.deleteContent( model.document.selection );\n\t\t} );\n\n\t\tbuffer.unlock();\n\t}\n}\n\nconst safeKeycodes = [\n\tgetCode( 'arrowUp' ),\n\tgetCode( 'arrowRight' ),\n\tgetCode( 'arrowDown' ),\n\tgetCode( 'arrowLeft' ),\n\t9, // Tab\n\t16, // Shift\n\t17, // Ctrl\n\t18, // Alt\n\t19, // Pause\n\t20, // CapsLock\n\t27, // Escape\n\t33, // PageUp\n\t34, // PageDown\n\t35, // Home\n\t36, // End,\n\t45, // Insert,\n\t91, // Windows,\n\t93, // Menu key,\n\t144, // NumLock\n\t145, // ScrollLock,\n\t173, // Mute/Unmute\n\t174, // Volume up\n\t175, // Volume down,\n\t176, // Next song,\n\t177, // Previous song,\n\t178, // Stop,\n\t179, // Play/Pause,\n\t255 // Display brightness (increase and decrease)\n];\n\n// Function keys.\nfor ( let code = 112; code <= 135; code++ ) {\n\tsafeKeycodes.push( code );\n}\n\n// Returns `true` if a keystroke should not cause any content change caused by \"typing\".\n//\n// Note: This implementation is very simple and will need to be refined with time.\n//\n// @private\n// @param {engine.view.observer.keyObserver.KeyEventData} keyData\n// @returns {Boolean}\nfunction isSafeKeystroke( keyData ) {\n\t// Keystrokes which contain Ctrl don't represent typing.\n\tif ( keyData.ctrlKey ) {\n\t\treturn true;\n\t}\n\n\treturn safeKeycodes.includes( keyData.keyCode );\n}\n"]}]}