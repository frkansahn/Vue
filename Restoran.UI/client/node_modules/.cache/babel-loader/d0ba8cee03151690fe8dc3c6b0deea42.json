{"remainingRequest":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-engine\\src\\model\\utils\\getselectedcontent.js","dependencies":[{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-engine\\src\\model\\utils\\getselectedcontent.js","mtime":499162500000},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-dev-webpack-plugin\\lib\\translatesourceloader.js","mtime":499162500000},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1581760768702},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1581760768279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKCi8qKgogKiBAbGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMDMtMjAyMCwgQ0tTb3VyY2UgLSBGcmVkZXJpY28gS25hYmJlbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogRm9yIGxpY2Vuc2luZywgc2VlIExJQ0VOU0UubWQgb3IgaHR0cHM6Ly9ja2VkaXRvci5jb20vbGVnYWwvY2tlZGl0b3Itb3NzLWxpY2Vuc2UKICovCgovKioKICogQG1vZHVsZSBlbmdpbmUvbW9kZWwvdXRpbHMvZ2V0c2VsZWN0ZWRjb250ZW50CiAqLwoKLyoqCiAqIEdldHMgYSBjbG9uZSBvZiB0aGUgc2VsZWN0ZWQgY29udGVudC4KICoKICogRm9yIGV4YW1wbGUsIGZvciB0aGUgZm9sbG93aW5nIHNlbGVjdGlvbjoKICoKICogYGBgaHRtbAogKiA8cD54PC9wPjxxdW90ZT48cD55PC9wPjxoPmZpcltzdDwvaD48L3F1b3RlPjxwPnNlXWNvbmQ8L3A+PHA+ejwvcD4KICogYGBgCiAqCiAqIEl0IHdpbGwgcmV0dXJuIGEgZG9jdW1lbnQgZnJhZ21lbnQgd2l0aCBzdWNoIGEgY29udGVudDoKICoKICogYGBgaHRtbAogKiA8cXVvdGU+PGg+c3Q8L2g+PC9xdW90ZT48cD5zZTwvcD4KICogYGBgCiAqCiAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9tb2RlbH5Nb2RlbH0gbW9kZWwgVGhlIG1vZGVsIGluIGNvbnRleHQgb2Ygd2hpY2gKICogdGhlIHNlbGVjdGlvbiBtb2RpZmljYXRpb24gc2hvdWxkIGJlIHBlcmZvcm1lZC4KICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL3NlbGVjdGlvbn5TZWxlY3Rpb258bW9kdWxlOmVuZ2luZS9tb2RlbC9kb2N1bWVudHNlbGVjdGlvbn5Eb2N1bWVudFNlbGVjdGlvbn0gc2VsZWN0aW9uCiAqIFRoZSBzZWxlY3Rpb24gb2Ygd2hpY2ggY29udGVudCB3aWxsIGJlIHJldHVybmVkLgogKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS9tb2RlbC9kb2N1bWVudGZyYWdtZW50fkRvY3VtZW50RnJhZ21lbnR9CiAqLwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRTZWxlY3RlZENvbnRlbnQobW9kZWwsIHNlbGVjdGlvbikgewogIHJldHVybiBtb2RlbC5jaGFuZ2UoZnVuY3Rpb24gKHdyaXRlcikgewogICAgdmFyIGZyYWcgPSB3cml0ZXIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwogICAgdmFyIHJhbmdlID0gc2VsZWN0aW9uLmdldEZpcnN0UmFuZ2UoKTsKCiAgICBpZiAoIXJhbmdlIHx8IHJhbmdlLmlzQ29sbGFwc2VkKSB7CiAgICAgIHJldHVybiBmcmFnOwogICAgfQoKICAgIHZhciByb290ID0gcmFuZ2Uuc3RhcnQucm9vdDsKICAgIHZhciBjb21tb25QYXRoID0gcmFuZ2Uuc3RhcnQuZ2V0Q29tbW9uUGF0aChyYW5nZS5lbmQpOwogICAgdmFyIGNvbW1vblBhcmVudCA9IHJvb3QuZ2V0Tm9kZUJ5UGF0aChjb21tb25QYXRoKTsgLy8gIyMgMXN0IHN0ZXAKICAgIC8vCiAgICAvLyBGaXJzdCwgd2UnbGwgY2xvbmUgYSBmcmFnbWVudCByZXByZXNlbnRlZCBieSBhIG1pbmltYWwgZmxhdCByYW5nZQogICAgLy8gY29udGFpbmluZyB0aGUgb3JpZ2luYWwgcmFuZ2UgdG8gYmUgY2xvbmVkLgogICAgLy8gRS5nLiBsZXQncyBjb25zaWRlciBzdWNoIGEgcmFuZ2U6CiAgICAvLwogICAgLy8gPHA+eDwvcD48cXVvdGU+PHA+eTwvcD48aD5maXJbc3Q8L2g+PC9xdW90ZT48cD5zZV1jb25kPC9wPjxwPno8L3A+CiAgICAvLwogICAgLy8gQSBtaW5pbWFsIGZsYXQgcmFuZ2UgY29udGFpbmluZyB0aGlzIG9uZSBpczoKICAgIC8vCiAgICAvLyA8cD54PC9wPls8cXVvdGU+PHA+eTwvcD48aD5maXJzdDwvaD48L3F1b3RlPjxwPnNlY29uZDwvcD5dPHA+ejwvcD4KICAgIC8vCiAgICAvLyBXZSBjYW4gZWFzaWx5IGNsb25lIHRoaXMgc3RydWN0dXJlLCBwcmVzZXJ2aW5nIGUuZy4gdGhlIDxxdW90ZT4gZWxlbWVudC4KCiAgICB2YXIgZmxhdFN1YnRyZWVSYW5nZTsKCiAgICBpZiAocmFuZ2Uuc3RhcnQucGFyZW50ID09IHJhbmdlLmVuZC5wYXJlbnQpIHsKICAgICAgLy8gVGhlIG9yaWdpbmFsIHJhbmdlIGlzIGZsYXQsIHNvIHRha2UgaXQuCiAgICAgIGZsYXRTdWJ0cmVlUmFuZ2UgPSByYW5nZTsKICAgIH0gZWxzZSB7CiAgICAgIGZsYXRTdWJ0cmVlUmFuZ2UgPSB3cml0ZXIuY3JlYXRlUmFuZ2Uod3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQoY29tbW9uUGFyZW50LCByYW5nZS5zdGFydC5wYXRoW2NvbW1vblBhdGgubGVuZ3RoXSksIHdyaXRlci5jcmVhdGVQb3NpdGlvbkF0KGNvbW1vblBhcmVudCwgcmFuZ2UuZW5kLnBhdGhbY29tbW9uUGF0aC5sZW5ndGhdICsgMSkpOwogICAgfQoKICAgIHZhciBob3dNYW55ID0gZmxhdFN1YnRyZWVSYW5nZS5lbmQub2Zmc2V0IC0gZmxhdFN1YnRyZWVSYW5nZS5zdGFydC5vZmZzZXQ7IC8vIENsb25lIHRoZSB3aG9sZSBjb250ZW50cy4KCiAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7CiAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKCiAgICB0cnkgewogICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBmbGF0U3VidHJlZVJhbmdlLmdldEl0ZW1zKHsKICAgICAgICBzaGFsbG93OiB0cnVlCiAgICAgIH0pW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkgewogICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CgogICAgICAgIGlmIChpdGVtLmlzKCd0ZXh0UHJveHknKSkgewogICAgICAgICAgd3JpdGVyLmFwcGVuZFRleHQoaXRlbS5kYXRhLCBpdGVtLmdldEF0dHJpYnV0ZXMoKSwgZnJhZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdyaXRlci5hcHBlbmQoaXRlbS5fY2xvbmUodHJ1ZSksIGZyYWcpOwogICAgICAgIH0KICAgICAgfSAvLyAjIyAybmQgc3RlcAogICAgICAvLwogICAgICAvLyBJZiB0aGUgb3JpZ2luYWwgcmFuZ2Ugd2Fzbid0IGZsYXQsIHRoZW4gd2UgbmVlZCB0byByZW1vdmUgdGhlIGV4Y2VzcyBub2RlcyBmcm9tIHRoZSBib3RoIGVuZHMgb2YgdGhlIGNsb25lZCBmcmFnbWVudC4KICAgICAgLy8KICAgICAgLy8gRm9yIGV4YW1wbGUsIGZvciB0aGUgcmFuZ2Ugc2hvd24gaW4gdGhlIDFzdCBzdGVwIGNvbW1lbnQsIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZXNlIHBpZWNlczoKICAgICAgLy8KICAgICAgLy8gPHF1b3RlPls8cD55PC9wPl08aD5bZmlyXXN0PC9oPjwvcXVvdGU+PHA+c2VbY29uZF08L3A+CiAgICAgIC8vCiAgICAgIC8vIFNvIHRoaXMgd2lsbCBiZSB0aGUgZmluYWwgY29waWVkIGNvbnRlbnQ6CiAgICAgIC8vCiAgICAgIC8vIDxxdW90ZT48aD5zdDwvaD48L3F1b3RlPjxwPnNlPC9wPgogICAgICAvLwogICAgICAvLyBJbiBvcmRlciB0byBkbyB0aGF0LCB3ZSByZW1vdmUgY29udGVudCBmcm9tIHRoZXNlIHR3byByYW5nZXM6CiAgICAgIC8vCiAgICAgIC8vIFs8cXVvdGU+PHA+eTwvcD48aD5maXJdc3Q8L2g+PC9xdW90ZT48cD5zZVtjb25kPC9wPl0KCiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjsKICAgIH0gZmluYWxseSB7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgIH0KICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGlmIChmbGF0U3VidHJlZVJhbmdlICE9IHJhbmdlKSB7CiAgICAgIC8vIEZpbmQgdGhlIHBvc2l0aW9uIG9mIHRoZSBvcmlnaW5hbCByYW5nZSBpbiB0aGUgY2xvbmVkIGZyYWdtZW50LgogICAgICB2YXIgbmV3UmFuZ2UgPSByYW5nZS5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUoZmxhdFN1YnRyZWVSYW5nZS5zdGFydCwgd3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQoZnJhZywgMCksIGhvd01hbnkpWzBdOwoKICAgICAgdmFyIGxlZnRFeGNlc3NSYW5nZSA9IHdyaXRlci5jcmVhdGVSYW5nZSh3cml0ZXIuY3JlYXRlUG9zaXRpb25BdChmcmFnLCAwKSwgbmV3UmFuZ2Uuc3RhcnQpOwogICAgICB2YXIgcmlnaHRFeGNlc3NSYW5nZSA9IHdyaXRlci5jcmVhdGVSYW5nZShuZXdSYW5nZS5lbmQsIHdyaXRlci5jcmVhdGVQb3NpdGlvbkF0KGZyYWcsICdlbmQnKSk7CiAgICAgIHJlbW92ZVJhbmdlQ29udGVudChyaWdodEV4Y2Vzc1JhbmdlLCB3cml0ZXIpOwogICAgICByZW1vdmVSYW5nZUNvbnRlbnQobGVmdEV4Y2Vzc1JhbmdlLCB3cml0ZXIpOwogICAgfQoKICAgIHJldHVybiBmcmFnOwogIH0pOwp9IC8vIEFmdGVyIGh0dHBzOi8vZ2l0aHViLmNvbS9ja2VkaXRvci9ja2VkaXRvcjUtZW5naW5lL2lzc3Vlcy82OTAgaXMgZml4ZWQsCi8vIHRoaXMgZnVuY3Rpb24gd2lsbCwgbW9zdCBsaWtlbHksIGJlIGFibGUgdG8gcmV3cml0dGVuIHVzaW5nIGdldE1pbmltYWxGbGF0UmFuZ2VzKCkuCgpmdW5jdGlvbiByZW1vdmVSYW5nZUNvbnRlbnQocmFuZ2UsIHdyaXRlcikgewogIHZhciBwYXJlbnRzVG9DaGVjayA9IFtdOwogIEFycmF5LmZyb20ocmFuZ2UuZ2V0SXRlbXMoewogICAgZGlyZWN0aW9uOiAnYmFja3dhcmQnCiAgfSkpIC8vIFdlIHNob3VsZCBiZXR0ZXIgc3RvcmUgcmFuZ2VzIGJlY2F1c2UgdGV4dCBwcm94aWVzIHdpbGwgbG9zZSBpbnRlZ3JpdHkKICAvLyB3aXRoIHRoZSB0ZXh0IG5vZGVzIHdoZW4gd2UnbGwgc3RhcnQgcmVtb3ZpbmcgY29udGVudC4KICAubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gd3JpdGVyLmNyZWF0ZVJhbmdlT24oaXRlbSk7CiAgfSkgLy8gRmlsdGVyIG9ubHkgdGhlc2UgaXRlbXMgd2hpY2ggYXJlIGZ1bGx5IGNvbnRhaW5lZCBpbiB0aGUgcGFzc2VkIHJhbmdlLgogIC8vCiAgLy8gRS5nLiBmb3IgdGhlIGZvbGxvd2luZyByYW5nZTogWzxxdW90ZT48cD55PC9wPjxoPmZpcl1zdDwvaD4KICAvLyB0aGUgd2Fsa2VyIHdpbGwgcmV0dXJuIHRoZSBlbnRpcmUgPGg+IGVsZW1lbnQsIHdoZW4gb25seSB0aGUgImZpciIgaXRlbSBpbnNpZGUgaXQgaXMgZnVsbHkgY29udGFpbmVkLgogIC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW1SYW5nZSkgewogICAgLy8gV2Ugc2hvdWxkIGJlIGFibGUgdG8gdXNlIFJhbmdlLmNvbnRhaW5zUmFuZ2UsIGJ1dCBodHRwczovL2dpdGh1Yi5jb20vY2tlZGl0b3IvY2tlZGl0b3I1LWVuZ2luZS9pc3N1ZXMvNjkxLgogICAgdmFyIGNvbnRhaW5lZCA9IChpdGVtUmFuZ2Uuc3RhcnQuaXNBZnRlcihyYW5nZS5zdGFydCkgfHwgaXRlbVJhbmdlLnN0YXJ0LmlzRXF1YWwocmFuZ2Uuc3RhcnQpKSAmJiAoaXRlbVJhbmdlLmVuZC5pc0JlZm9yZShyYW5nZS5lbmQpIHx8IGl0ZW1SYW5nZS5lbmQuaXNFcXVhbChyYW5nZS5lbmQpKTsKICAgIHJldHVybiBjb250YWluZWQ7CiAgfSkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbVJhbmdlKSB7CiAgICBwYXJlbnRzVG9DaGVjay5wdXNoKGl0ZW1SYW5nZS5zdGFydC5wYXJlbnQpOwogICAgd3JpdGVyLnJlbW92ZShpdGVtUmFuZ2UpOwogIH0pOyAvLyBSZW1vdmUgYW5jZXN0b3JzIG9mIHRoZSByZW1vdmVkIGl0ZW1zIGlmIHRoZXkgdHVybmVkIHRvIGJlIGVtcHR5IG5vdwogIC8vICh0aGVpciB3aG9sZSBjb250ZW50IHdhcyBjb250YWluZWQgaW4gdGhlIHJhbmdlKS4KCiAgcGFyZW50c1RvQ2hlY2suZm9yRWFjaChmdW5jdGlvbiAocGFyZW50VG9DaGVjaykgewogICAgdmFyIHBhcmVudCA9IHBhcmVudFRvQ2hlY2s7CgogICAgd2hpbGUgKHBhcmVudC5wYXJlbnQgJiYgcGFyZW50LmlzRW1wdHkpIHsKICAgICAgdmFyIHJlbW92ZVJhbmdlID0gd3JpdGVyLmNyZWF0ZVJhbmdlT24ocGFyZW50KTsKICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDsKICAgICAgd3JpdGVyLnJlbW92ZShyZW1vdmVSYW5nZSk7CiAgICB9CiAgfSk7Cn0="},{"version":3,"sources":["C:/Users/pc/Desktop/Restoran/Restoran/Restoran.UI/client/node_modules/@ckeditor/ckeditor5-engine/src/model/utils/getselectedcontent.js"],"names":["getSelectedContent","model","selection","change","writer","frag","createDocumentFragment","range","getFirstRange","isCollapsed","root","start","commonPath","getCommonPath","end","commonParent","getNodeByPath","flatSubtreeRange","parent","createRange","createPositionAt","path","length","howMany","offset","getItems","shallow","item","is","appendText","data","getAttributes","append","_clone","newRange","_getTransformedByMove","leftExcessRange","rightExcessRange","removeRangeContent","parentsToCheck","Array","from","direction","map","createRangeOn","filter","itemRange","contained","isAfter","isEqual","isBefore","forEach","push","remove","parentToCheck","isEmpty","removeRange"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/getselectedcontent\n */\n\n/**\n * Gets a clone of the selected content.\n *\n * For example, for the following selection:\n *\n * ```html\n * <p>x</p><quote><p>y</p><h>fir[st</h></quote><p>se]cond</p><p>z</p>\n * ```\n *\n * It will return a document fragment with such a content:\n *\n * ```html\n * <quote><h>st</h></quote><p>se</p>\n * ```\n *\n * @param {module:engine/model/model~Model} model The model in context of which\n * the selection modification should be performed.\n * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n * The selection of which content will be returned.\n * @returns {module:engine/model/documentfragment~DocumentFragment}\n */\nexport default function getSelectedContent( model, selection ) {\n\treturn model.change( writer => {\n\t\tconst frag = writer.createDocumentFragment();\n\t\tconst range = selection.getFirstRange();\n\n\t\tif ( !range || range.isCollapsed ) {\n\t\t\treturn frag;\n\t\t}\n\n\t\tconst root = range.start.root;\n\t\tconst commonPath = range.start.getCommonPath( range.end );\n\t\tconst commonParent = root.getNodeByPath( commonPath );\n\n\t\t// ## 1st step\n\t\t//\n\t\t// First, we'll clone a fragment represented by a minimal flat range\n\t\t// containing the original range to be cloned.\n\t\t// E.g. let's consider such a range:\n\t\t//\n\t\t// <p>x</p><quote><p>y</p><h>fir[st</h></quote><p>se]cond</p><p>z</p>\n\t\t//\n\t\t// A minimal flat range containing this one is:\n\t\t//\n\t\t// <p>x</p>[<quote><p>y</p><h>first</h></quote><p>second</p>]<p>z</p>\n\t\t//\n\t\t// We can easily clone this structure, preserving e.g. the <quote> element.\n\t\tlet flatSubtreeRange;\n\n\t\tif ( range.start.parent == range.end.parent ) {\n\t\t\t// The original range is flat, so take it.\n\t\t\tflatSubtreeRange = range;\n\t\t} else {\n\t\t\tflatSubtreeRange = writer.createRange(\n\t\t\t\twriter.createPositionAt( commonParent, range.start.path[ commonPath.length ] ),\n\t\t\t\twriter.createPositionAt( commonParent, range.end.path[ commonPath.length ] + 1 )\n\t\t\t);\n\t\t}\n\n\t\tconst howMany = flatSubtreeRange.end.offset - flatSubtreeRange.start.offset;\n\n\t\t// Clone the whole contents.\n\t\tfor ( const item of flatSubtreeRange.getItems( { shallow: true } ) ) {\n\t\t\tif ( item.is( 'textProxy' ) ) {\n\t\t\t\twriter.appendText( item.data, item.getAttributes(), frag );\n\t\t\t} else {\n\t\t\t\twriter.append( item._clone( true ), frag );\n\t\t\t}\n\t\t}\n\n\t\t// ## 2nd step\n\t\t//\n\t\t// If the original range wasn't flat, then we need to remove the excess nodes from the both ends of the cloned fragment.\n\t\t//\n\t\t// For example, for the range shown in the 1st step comment, we need to remove these pieces:\n\t\t//\n\t\t// <quote>[<p>y</p>]<h>[fir]st</h></quote><p>se[cond]</p>\n\t\t//\n\t\t// So this will be the final copied content:\n\t\t//\n\t\t// <quote><h>st</h></quote><p>se</p>\n\t\t//\n\t\t// In order to do that, we remove content from these two ranges:\n\t\t//\n\t\t// [<quote><p>y</p><h>fir]st</h></quote><p>se[cond</p>]\n\t\tif ( flatSubtreeRange != range ) {\n\t\t\t// Find the position of the original range in the cloned fragment.\n\t\t\tconst newRange = range._getTransformedByMove( flatSubtreeRange.start, writer.createPositionAt( frag, 0 ), howMany )[ 0 ];\n\n\t\t\tconst leftExcessRange = writer.createRange( writer.createPositionAt( frag, 0 ), newRange.start );\n\t\t\tconst rightExcessRange = writer.createRange( newRange.end, writer.createPositionAt( frag, 'end' ) );\n\n\t\t\tremoveRangeContent( rightExcessRange, writer );\n\t\t\tremoveRangeContent( leftExcessRange, writer );\n\t\t}\n\n\t\treturn frag;\n\t} );\n}\n\n// After https://github.com/ckeditor/ckeditor5-engine/issues/690 is fixed,\n// this function will, most likely, be able to rewritten using getMinimalFlatRanges().\nfunction removeRangeContent( range, writer ) {\n\tconst parentsToCheck = [];\n\n\tArray.from( range.getItems( { direction: 'backward' } ) )\n\t\t// We should better store ranges because text proxies will lose integrity\n\t\t// with the text nodes when we'll start removing content.\n\t\t.map( item => writer.createRangeOn( item ) )\n\t\t// Filter only these items which are fully contained in the passed range.\n\t\t//\n\t\t// E.g. for the following range: [<quote><p>y</p><h>fir]st</h>\n\t\t// the walker will return the entire <h> element, when only the \"fir\" item inside it is fully contained.\n\t\t.filter( itemRange => {\n\t\t\t// We should be able to use Range.containsRange, but https://github.com/ckeditor/ckeditor5-engine/issues/691.\n\t\t\tconst contained =\n\t\t\t\t( itemRange.start.isAfter( range.start ) || itemRange.start.isEqual( range.start ) ) &&\n\t\t\t\t( itemRange.end.isBefore( range.end ) || itemRange.end.isEqual( range.end ) );\n\n\t\t\treturn contained;\n\t\t} )\n\t\t.forEach( itemRange => {\n\t\t\tparentsToCheck.push( itemRange.start.parent );\n\n\t\t\twriter.remove( itemRange );\n\t\t} );\n\n\t// Remove ancestors of the removed items if they turned to be empty now\n\t// (their whole content was contained in the range).\n\tparentsToCheck.forEach( parentToCheck => {\n\t\tlet parent = parentToCheck;\n\n\t\twhile ( parent.parent && parent.isEmpty ) {\n\t\t\tconst removeRange = writer.createRangeOn( parent );\n\n\t\t\tparent = parent.parent;\n\n\t\t\twriter.remove( removeRange );\n\t\t}\n\t} );\n}\n"]}]}