{"remainingRequest":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-adapter-ckfinder\\src\\uploadadapter.js","dependencies":[{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-adapter-ckfinder\\src\\uploadadapter.js","mtime":499162500000},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\@ckeditor\\ckeditor5-dev-webpack-plugin\\lib\\translatesourceloader.js","mtime":499162500000},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1581760768702},{"path":"C:\\Users\\pc\\Desktop\\Restoran\\Restoran\\Restoran.UI\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1581760768279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXFJlc3RvcmFuXFxSZXN0b3JhblxcUmVzdG9yYW4uVUlcXGNsaWVudFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXFJlc3RvcmFuXFxSZXN0b3JhblxcUmVzdG9yYW4uVUlcXGNsaWVudFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiQzpcXFVzZXJzXFxwY1xcRGVza3RvcFxcUmVzdG9yYW5cXFJlc3RvcmFuXFxSZXN0b3Jhbi5VSVxcY2xpZW50XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxSZXN0b3JhblxcUmVzdG9yYW5cXFJlc3RvcmFuLlVJXFxjbGllbnRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxSZXN0b3JhblxcUmVzdG9yYW5cXFJlc3RvcmFuLlVJXFxjbGllbnRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKCi8qKgogKiBAbGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMDMtMjAyMCwgQ0tTb3VyY2UgLSBGcmVkZXJpY28gS25hYmJlbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogRm9yIGxpY2Vuc2luZywgc2VlIExJQ0VOU0UubWQgb3IgaHR0cHM6Ly9ja2VkaXRvci5jb20vbGVnYWwvY2tlZGl0b3Itb3NzLWxpY2Vuc2UKICovCgovKiBnbG9iYWxzIFhNTEh0dHBSZXF1ZXN0LCBGb3JtRGF0YSAqLwoKLyoqCiAqIEBtb2R1bGUgYWRhcHRlci1ja2ZpbmRlci91cGxvYWRhZGFwdGVyCiAqLwppbXBvcnQgUGx1Z2luIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtY29yZS9zcmMvcGx1Z2luJzsKaW1wb3J0IEZpbGVSZXBvc2l0b3J5IGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXBsb2FkL3NyYy9maWxlcmVwb3NpdG9yeSc7CmltcG9ydCB7IGdldENzcmZUb2tlbiB9IGZyb20gJy4vdXRpbHMnOwovKioKICogQSBwbHVnaW4gdGhhdCBlbmFibGVzIGZpbGUgdXBsb2FkcyBpbiBDS0VkaXRvciA1IHVzaW5nIHRoZSBDS0ZpbmRlciBzZXJ2ZXLigJNzaWRlIGNvbm5lY3Rvci4KICoKICogU2VlIHRoZSB7QGdsaW5rIGZlYXR1cmVzL2ltYWdlLXVwbG9hZC9ja2ZpbmRlciAiQ0tGaW5kZXIgZmlsZSBtYW5hZ2VyIGludGVncmF0aW9uIiBndWlkZX0gdG8gbGVhcm4gaG93IHRvIGNvbmZpZ3VyZQogKiBhbmQgdXNlIHRoaXMgZmVhdHVyZSBhcyB3ZWxsIGFzIGZpbmQgb3V0IG1vcmUgYWJvdXQgdGhlIGZ1bGwgaW50ZWdyYXRpb24gd2l0aCB0aGUgZmlsZSBtYW5hZ2VyCiAqIHByb3ZpZGVkIGJ5IHRoZSB7QGxpbmsgbW9kdWxlOmNrZmluZGVyL2NrZmluZGVyfkNLRmluZGVyfSBwbHVnaW4uCiAqCiAqIENoZWNrIG91dCB0aGUge0BnbGluayBmZWF0dXJlcy9pbWFnZS11cGxvYWQvaW1hZ2UtdXBsb2FkIGNvbXByZWhlbnNpdmUgIkltYWdlIHVwbG9hZCBvdmVydmlldyJ9IHRvIGxlYXJuIGFib3V0CiAqIG90aGVyIHdheXMgdG8gdXBsb2FkIGltYWdlcyBpbnRvIENLRWRpdG9yIDUuCiAqCiAqIEBleHRlbmRzIG1vZHVsZTpjb3JlL3BsdWdpbn5QbHVnaW4KICovCgp2YXIgQ0tGaW5kZXJVcGxvYWRBZGFwdGVyID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1BsdWdpbikgewogIF9pbmhlcml0cyhDS0ZpbmRlclVwbG9hZEFkYXB0ZXIsIF9QbHVnaW4pOwoKICBmdW5jdGlvbiBDS0ZpbmRlclVwbG9hZEFkYXB0ZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ0tGaW5kZXJVcGxvYWRBZGFwdGVyKTsKCiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKENLRmluZGVyVXBsb2FkQWRhcHRlcikuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQ0tGaW5kZXJVcGxvYWRBZGFwdGVyLCBbewogICAga2V5OiAiaW5pdCIsCgogICAgLyoqCiAgICAgKiBAaW5oZXJpdERvYwogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB1cmwgPSB0aGlzLmVkaXRvci5jb25maWcuZ2V0KCdja2ZpbmRlci51cGxvYWRVcmwnKTsKCiAgICAgIGlmICghdXJsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIFJlZ2lzdGVyIENLRmluZGVyQWRhcHRlcgoKCiAgICAgIHRoaXMuZWRpdG9yLnBsdWdpbnMuZ2V0KEZpbGVSZXBvc2l0b3J5KS5jcmVhdGVVcGxvYWRBZGFwdGVyID0gZnVuY3Rpb24gKGxvYWRlcikgewogICAgICAgIHJldHVybiBuZXcgVXBsb2FkQWRhcHRlcihsb2FkZXIsIHVybCwgX3RoaXMuZWRpdG9yLnQpOwogICAgICB9OwogICAgfQogIH1dLCBbewogICAga2V5OiAicmVxdWlyZXMiLAoKICAgIC8qKgogICAgICogQGluaGVyaXREb2MKICAgICAqLwogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBbRmlsZVJlcG9zaXRvcnldOwogICAgfQogICAgLyoqCiAgICAgKiBAaW5oZXJpdERvYwogICAgICovCgogIH0sIHsKICAgIGtleTogInBsdWdpbk5hbWUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiAnQ0tGaW5kZXJVcGxvYWRBZGFwdGVyJzsKICAgIH0KICB9XSk7CgogIHJldHVybiBDS0ZpbmRlclVwbG9hZEFkYXB0ZXI7Cn0oUGx1Z2luKTsKLyoqCiAqIFVwbG9hZCBhZGFwdGVyIGZvciBDS0ZpbmRlci4KICoKICogQHByaXZhdGUKICogQGltcGxlbWVudHMgbW9kdWxlOnVwbG9hZC9maWxlcmVwb3NpdG9yeX5VcGxvYWRBZGFwdGVyCiAqLwoKCmV4cG9ydCB7IENLRmluZGVyVXBsb2FkQWRhcHRlciBhcyBkZWZhdWx0IH07Cgp2YXIgVXBsb2FkQWRhcHRlciA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIC8qKgogICAqIENyZWF0ZXMgYSBuZXcgYWRhcHRlciBpbnN0YW5jZS4KICAgKgogICAqIEBwYXJhbSB7bW9kdWxlOnVwbG9hZC9maWxlcmVwb3NpdG9yeX5GaWxlTG9hZGVyfSBsb2FkZXIKICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsCiAgICogQHBhcmFtIHttb2R1bGU6dXRpbHMvbG9jYWxlfkxvY2FsZSN0fSB0CiAgICovCiAgZnVuY3Rpb24gVXBsb2FkQWRhcHRlcihsb2FkZXIsIHVybCwgdCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVwbG9hZEFkYXB0ZXIpOwoKICAgIC8qKgogICAgICogRmlsZUxvYWRlciBpbnN0YW5jZSB0byB1c2UgZHVyaW5nIHRoZSB1cGxvYWQuCiAgICAgKgogICAgICogQG1lbWJlciB7bW9kdWxlOnVwbG9hZC9maWxlcmVwb3NpdG9yeX5GaWxlTG9hZGVyfSAjbG9hZGVyCiAgICAgKi8KICAgIHRoaXMubG9hZGVyID0gbG9hZGVyOwogICAgLyoqCiAgICAgKiBVcGxvYWQgVVJMLgogICAgICoKICAgICAqIEBtZW1iZXIge1N0cmluZ30gI3VybAogICAgICovCgogICAgdGhpcy51cmwgPSB1cmw7CiAgICAvKioKICAgICAqIExvY2FsZSB0cmFuc2xhdGlvbiBtZXRob2QuCiAgICAgKgogICAgICogQG1lbWJlciB7bW9kdWxlOnV0aWxzL2xvY2FsZX5Mb2NhbGUjdH0gI3QKICAgICAqLwoKICAgIHRoaXMudCA9IHQ7CiAgfQogIC8qKgogICAqIFN0YXJ0cyB0aGUgdXBsb2FkIHByb2Nlc3MuCiAgICoKICAgKiBAc2VlIG1vZHVsZTp1cGxvYWQvZmlsZXJlcG9zaXRvcnl+VXBsb2FkQWRhcHRlciN1cGxvYWQKICAgKiBAcmV0dXJucyB7UHJvbWlzZS48T2JqZWN0Pn0KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhVcGxvYWRBZGFwdGVyLCBbewogICAga2V5OiAidXBsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMubG9hZGVyLmZpbGUudGhlbihmdW5jdGlvbiAoZmlsZSkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICBfdGhpczIuX2luaXRSZXF1ZXN0KCk7CgogICAgICAgICAgX3RoaXMyLl9pbml0TGlzdGVuZXJzKHJlc29sdmUsIHJlamVjdCwgZmlsZSk7CgogICAgICAgICAgX3RoaXMyLl9zZW5kUmVxdWVzdChmaWxlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIEFib3J0cyB0aGUgdXBsb2FkIHByb2Nlc3MuCiAgICAgKgogICAgICogQHNlZSBtb2R1bGU6dXBsb2FkL2ZpbGVyZXBvc2l0b3J5flVwbG9hZEFkYXB0ZXIjYWJvcnQKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJhYm9ydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWJvcnQoKSB7CiAgICAgIGlmICh0aGlzLnhocikgewogICAgICAgIHRoaXMueGhyLmFib3J0KCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogSW5pdGlhbGl6ZXMgdGhlIFhNTEh0dHBSZXF1ZXN0IG9iamVjdC4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICovCgogIH0sIHsKICAgIGtleTogIl9pbml0UmVxdWVzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2luaXRSZXF1ZXN0KCkgewogICAgICB2YXIgeGhyID0gdGhpcy54aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGhyLm9wZW4oJ1BPU1QnLCB0aGlzLnVybCwgdHJ1ZSk7CiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7CiAgICB9CiAgICAvKioKICAgICAqIEluaXRpYWxpemVzIFhNTEh0dHBSZXF1ZXN0IGxpc3RlbmVycy4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBDYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgcmVxdWVzdCBpcyBzdWNjZXNzZnVsLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSByZXF1ZXN0IGNhbm5vdCBiZSBjb21wbGV0ZWQuCiAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgRmlsZSBpbnN0YW5jZSB0byBiZSB1cGxvYWRlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfaW5pdExpc3RlbmVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2luaXRMaXN0ZW5lcnMocmVzb2x2ZSwgcmVqZWN0LCBmaWxlKSB7CiAgICAgIHZhciB4aHIgPSB0aGlzLnhocjsKICAgICAgdmFyIGxvYWRlciA9IHRoaXMubG9hZGVyOwogICAgICB2YXIgdCA9IHRoaXMudDsKICAgICAgdmFyIGdlbmVyaWNFcnJvciA9IHQoJ0Nhbm5vdCB1cGxvYWQgZmlsZTonKSArICIgIi5jb25jYXQoZmlsZS5uYW1lLCAiLiIpOwogICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHJlamVjdChnZW5lcmljRXJyb3IpOwogICAgICB9KTsKICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiByZWplY3QoKTsKICAgICAgfSk7CiAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciByZXNwb25zZSA9IHhoci5yZXNwb25zZTsKCiAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2UudXBsb2FkZWQpIHsKICAgICAgICAgIHJldHVybiByZWplY3QocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXJyb3IgJiYgcmVzcG9uc2UuZXJyb3IubWVzc2FnZSA/IHJlc3BvbnNlLmVycm9yLm1lc3NhZ2UgOiBnZW5lcmljRXJyb3IpOwogICAgICAgIH0KCiAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICBkZWZhdWx0OiByZXNwb25zZS51cmwKICAgICAgICB9KTsKICAgICAgfSk7IC8vIFVwbG9hZCBwcm9ncmVzcyB3aGVuIGl0J3Mgc3VwcG9ydGVkLgoKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KCiAgICAgIGlmICh4aHIudXBsb2FkKSB7CiAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgICAgIGlmIChldnQubGVuZ3RoQ29tcHV0YWJsZSkgewogICAgICAgICAgICBsb2FkZXIudXBsb2FkVG90YWwgPSBldnQudG90YWw7CiAgICAgICAgICAgIGxvYWRlci51cGxvYWRlZCA9IGV2dC5sb2FkZWQ7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUHJlcGFyZXMgdGhlIGRhdGEgYW5kIHNlbmRzIHRoZSByZXF1ZXN0LgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgRmlsZSBpbnN0YW5jZSB0byBiZSB1cGxvYWRlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfc2VuZFJlcXVlc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kUmVxdWVzdChmaWxlKSB7CiAgICAgIC8vIFByZXBhcmUgZm9ybSBkYXRhLgogICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBkYXRhLmFwcGVuZCgndXBsb2FkJywgZmlsZSk7CiAgICAgIGRhdGEuYXBwZW5kKCdja0NzcmZUb2tlbicsIGdldENzcmZUb2tlbigpKTsgLy8gU2VuZCByZXF1ZXN0LgoKICAgICAgdGhpcy54aHIuc2VuZChkYXRhKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBVcGxvYWRBZGFwdGVyOwp9KCk7"},{"version":3,"sources":["C:/Users/pc/Desktop/Restoran/Restoran/Restoran.UI/client/node_modules/@ckeditor/ckeditor5-adapter-ckfinder/src/uploadadapter.js"],"names":["Plugin","FileRepository","getCsrfToken","CKFinderUploadAdapter","url","editor","config","get","plugins","createUploadAdapter","loader","UploadAdapter","t","file","then","Promise","resolve","reject","_initRequest","_initListeners","_sendRequest","xhr","abort","XMLHttpRequest","open","responseType","genericError","name","addEventListener","response","uploaded","error","message","default","upload","evt","lengthComputable","uploadTotal","total","loaded","data","FormData","append","send"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals XMLHttpRequest, FormData */\n\n/**\n * @module adapter-ckfinder/uploadadapter\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport FileRepository from '@ckeditor/ckeditor5-upload/src/filerepository';\nimport { getCsrfToken } from './utils';\n\n/**\n * A plugin that enables file uploads in CKEditor 5 using the CKFinder serverâ€“side connector.\n *\n * See the {@glink features/image-upload/ckfinder \"CKFinder file manager integration\" guide} to learn how to configure\n * and use this feature as well as find out more about the full integration with the file manager\n * provided by the {@link module:ckfinder/ckfinder~CKFinder} plugin.\n *\n * Check out the {@glink features/image-upload/image-upload comprehensive \"Image upload overview\"} to learn about\n * other ways to upload images into CKEditor 5.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class CKFinderUploadAdapter extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ FileRepository ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'CKFinderUploadAdapter';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst url = this.editor.config.get( 'ckfinder.uploadUrl' );\n\n\t\tif ( !url ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Register CKFinderAdapter\n\t\tthis.editor.plugins.get( FileRepository ).createUploadAdapter = loader => new UploadAdapter( loader, url, this.editor.t );\n\t}\n}\n\n/**\n * Upload adapter for CKFinder.\n *\n * @private\n * @implements module:upload/filerepository~UploadAdapter\n */\nclass UploadAdapter {\n\t/**\n\t * Creates a new adapter instance.\n\t *\n\t * @param {module:upload/filerepository~FileLoader} loader\n\t * @param {String} url\n\t * @param {module:utils/locale~Locale#t} t\n\t */\n\tconstructor( loader, url, t ) {\n\t\t/**\n\t\t * FileLoader instance to use during the upload.\n\t\t *\n\t\t * @member {module:upload/filerepository~FileLoader} #loader\n\t\t */\n\t\tthis.loader = loader;\n\n\t\t/**\n\t\t * Upload URL.\n\t\t *\n\t\t * @member {String} #url\n\t\t */\n\t\tthis.url = url;\n\n\t\t/**\n\t\t * Locale translation method.\n\t\t *\n\t\t * @member {module:utils/locale~Locale#t} #t\n\t\t */\n\t\tthis.t = t;\n\t}\n\n\t/**\n\t * Starts the upload process.\n\t *\n\t * @see module:upload/filerepository~UploadAdapter#upload\n\t * @returns {Promise.<Object>}\n\t */\n\tupload() {\n\t\treturn this.loader.file.then( file => {\n\t\t\treturn new Promise( ( resolve, reject ) => {\n\t\t\t\tthis._initRequest();\n\t\t\t\tthis._initListeners( resolve, reject, file );\n\t\t\t\tthis._sendRequest( file );\n\t\t\t} );\n\t\t} );\n\t}\n\n\t/**\n\t * Aborts the upload process.\n\t *\n\t * @see module:upload/filerepository~UploadAdapter#abort\n\t */\n\tabort() {\n\t\tif ( this.xhr ) {\n\t\t\tthis.xhr.abort();\n\t\t}\n\t}\n\n\t/**\n\t * Initializes the XMLHttpRequest object.\n\t *\n\t * @private\n\t */\n\t_initRequest() {\n\t\tconst xhr = this.xhr = new XMLHttpRequest();\n\n\t\txhr.open( 'POST', this.url, true );\n\t\txhr.responseType = 'json';\n\t}\n\n\t/**\n\t * Initializes XMLHttpRequest listeners.\n\t *\n\t * @private\n\t * @param {Function} resolve Callback function to be called when the request is successful.\n\t * @param {Function} reject Callback function to be called when the request cannot be completed.\n\t * @param {File} file File instance to be uploaded.\n\t */\n\t_initListeners( resolve, reject, file ) {\n\t\tconst xhr = this.xhr;\n\t\tconst loader = this.loader;\n\t\tconst t = this.t;\n\t\tconst genericError = t( 'Cannot upload file:' ) + ` ${ file.name }.`;\n\n\t\txhr.addEventListener( 'error', () => reject( genericError ) );\n\t\txhr.addEventListener( 'abort', () => reject() );\n\t\txhr.addEventListener( 'load', () => {\n\t\t\tconst response = xhr.response;\n\n\t\t\tif ( !response || !response.uploaded ) {\n\t\t\t\treturn reject( response && response.error && response.error.message ? response.error.message : genericError );\n\t\t\t}\n\n\t\t\tresolve( {\n\t\t\t\tdefault: response.url\n\t\t\t} );\n\t\t} );\n\n\t\t// Upload progress when it's supported.\n\t\t/* istanbul ignore else */\n\t\tif ( xhr.upload ) {\n\t\t\txhr.upload.addEventListener( 'progress', evt => {\n\t\t\t\tif ( evt.lengthComputable ) {\n\t\t\t\t\tloader.uploadTotal = evt.total;\n\t\t\t\t\tloader.uploaded = evt.loaded;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Prepares the data and sends the request.\n\t *\n\t * @private\n\t * @param {File} file File instance to be uploaded.\n\t */\n\t_sendRequest( file ) {\n\t\t// Prepare form data.\n\t\tconst data = new FormData();\n\t\tdata.append( 'upload', file );\n\t\tdata.append( 'ckCsrfToken', getCsrfToken() );\n\n\t\t// Send request.\n\t\tthis.xhr.send( data );\n\t}\n}\n"]}]}